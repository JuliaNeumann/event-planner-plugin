(window.webpackJsonp=window.webpackJsonp||[]).push([[3],[,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,,,,,,,,,,,,,,,function(t,e,n){},,function(t,e,n){"use strict";var a=n(4);n.n(a).a},function(t,e,n){"use strict";var a=n(5);n.n(a).a},function(t,e,n){"use strict";var a=n(6);n.n(a).a},function(t,e,n){"use strict";var a=n(7);n.n(a).a},function(t,e,n){"use strict";var a=n(8);n.n(a).a},,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var a=n(9);n.n(a).a},function(t,e,n){"use strict";var a=n(10);n.n(a).a},function(t,e,n){"use strict";var a=n(11);n.n(a).a},function(t,e,n){"use strict";var a=n(12);n.n(a).a},function(t,e,n){"use strict";var a=n(13);n.n(a).a},function(t,e,n){"use strict";var a=n(14);n.n(a).a},function(t,e,n){"use strict";var a=n(15);n.n(a).a},function(t,e,n){"use strict";var a=n(16);n.n(a).a},function(t,e,n){"use strict";var a=n(17);n.n(a).a},function(t,e,n){"use strict";var a=n(18);n.n(a).a},function(t,e,n){"use strict";var a=n(19);n.n(a).a},function(t,e,n){"use strict";var a=n(20);n.n(a).a},,,,,,function(t,e,n){"use strict";n.r(e);var a=n(1),i={name:"TableHead",props:["text","description","footnotes"]},s=(n(38),n(0)),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",{staticClass:"head"},[t._v("\n    "+t._s(t.text)+"\n    "),t.footnotes?n("sup",t._l(t.footnotes,(function(e){return n("a",{key:e.number,staticClass:"head__footnote",attrs:{href:"#footnote_"+e.number}},[t._v("\n        "+t._s(e.number)+"\n      ")])})),0):t._e(),t._v(" "),t.description?n("small",{staticClass:"head__tooltip"},[t._v("\n      "+t._s(t.description)+"\n    ")]):t._e()])}),[],!1,null,"bc76890a",null).exports,r=n(21),l=n(24),c=n(22),u=n.n(c);const d={props:["value"],data:function(){return{inputContent:""}},methods:{saveNewValue:function(){this.inputContent=this.inputContent||this.value,this.$emit("input",this.inputContent)}},created:function(){this.inputContent=this.value,this.focusOnStart&&this.$nextTick(()=>this.$el.focus())}};var h={name:"DateInput",components:{Datepicker:r.a},data:()=>({datepickerTranslations:l.a,firstClick:!0}),directives:{ClickOutside:u.a},mixins:[d],methods:{saveNewValue:function(t){this.firstClick?this.firstClick=!1:(t&&"function"==typeof t.getTime&&(this.inputContent=t.getTime()),d.methods.saveNewValue.call(this))}},created:function(){this.inputContent=new Date(this.value)}},p=Object(s.a)(h,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("datepicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.saveNewValue,expression:"saveNewValue"}],attrs:{language:t.datepickerTranslations,inline:!0},on:{selected:t.saveNewValue},model:{value:t.inputContent,callback:function(e){t.inputContent=e},expression:"inputContent"}})}),[],!1,null,null,null).exports,f={name:"SingleLineInput",data:function(){return{focusOnStart:!0}},mixins:[d]},v=(n(39),Object(s.a)(f,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.inputContent,expression:"inputContent"}],ref:"inputField",staticClass:"input",attrs:{type:"text"},domProps:{value:t.inputContent},on:{blur:t.saveNewValue,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.saveNewValue(e)},input:function(e){e.target.composing||(t.inputContent=e.target.value)}}})}),[],!1,null,"2747e1c6",null).exports),_={name:"MultiLineInput",data:function(){return{focusOnStart:!0}},mixins:[d]},w=(n(40),Object(s.a)(_,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputContent,expression:"inputContent"}],ref:"inputField",staticClass:"textarea",domProps:{value:t.inputContent},on:{blur:t.saveNewValue,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.saveNewValue(e)},input:function(e){e.target.composing||(t.inputContent=e.target.value)}}})}),[],!1,null,"5809fe12",null).exports),m={name:"IconInput",data:()=>({firstClick:!0}),props:["additional"],directives:{ClickOutside:u.a},mixins:[d],methods:{saveNewValue:function(){this.firstClick?this.firstClick=!1:(this.inputContent=this.inputContent&&this.inputContent.length>0?JSON.stringify(this.inputContent):"[]",d.methods.saveNewValue.call(this))}},computed:{options(){return JSON.parse(this.additional)}},created:function(){this.inputContent=this.value?JSON.parse(this.value):[]}};n(41);const g={date:p,text:v,longtext:w,icons:Object(s.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.saveNewValue,expression:"saveNewValue"}],staticClass:"options"},t._l(t.options,(function(e){return n("div",{key:e.name,staticClass:"option"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputContent,expression:"inputContent"}],attrs:{type:"checkbox",id:e.icon},domProps:{value:e.icon,checked:Array.isArray(t.inputContent)?t._i(t.inputContent,e.icon)>-1:t.inputContent},on:{change:function(n){var a=t.inputContent,i=n.target,s=!!i.checked;if(Array.isArray(a)){var o=e.icon,r=t._i(a,o);i.checked?r<0&&(t.inputContent=a.concat([o])):r>-1&&(t.inputContent=a.slice(0,r).concat(a.slice(r+1)))}else t.inputContent=s}}}),t._v(" "),n("label",{attrs:{for:e.icon}},[n("i",{staticClass:"fa",class:"fa-"+e.icon}),t._v("\n      "+t._s(e.name)+"\n    ")])])})),0)}),[],!1,null,"29a1ef2c",null).exports};var C={components:{DateInput:p,SingleLineInput:v,MultiLineInput:w},name:"InputField",props:["value","type","additional"],render:function(t){const e=this;return t(g[this.type],{props:{value:this.value,additional:this.additional},on:{input:function(t){e.$emit("input",t),e.$emit("stopEditMode")}},domProps:{value:e.value}})}},b=Object(s.a)(C,void 0,void 0,!1,null,null,null).exports,y={name:"IconList",props:["icons","additional"],computed:{cleanIcons(){return this.icons?JSON.parse(this.icons):[]},descriptions(){const t={};return JSON.parse(this.icons).forEach(e=>{t[e]=!1,JSON.parse(this.additional).forEach(n=>{n.icon===e&&(t[e]=n.name)})}),t}}},k=(n(42),{name:"CellContent",props:["head","content"],components:{IconList:Object(s.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"icon-list"},t._l(t.cleanIcons,(function(e){return n("i",{key:e,staticClass:"fa fa-fw",class:"fa-"+e,attrs:{title:t.descriptions[e]}})})),0)}),[],!1,null,"f07e5cfe",null).exports}}),x=Object(s.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",["date"===t.head.type?[t._v("\n    "+t._s(t._f("timestampToLocalString")(t.content))+"\n  ")]:"icons"===t.head.type?[n("IconList",{attrs:{additional:t.head.additional,icons:t.content}})]:[t._v("\n    "+t._s(t.content)+"\n  ")]],2)}),[],!1,null,"5e9dfe54",null).exports,H=n(25),O=n.n(H);const D=(window.eventPlannerApp?window.eventPlannerApp.rest_url:"http://127.0.0.1:8000/wp-json/")+"event-planner/v1/";async function T(){return await N({method:"get",url:`${D}all`})}function S(t){if(!t.headers)return[];let e=1;return t.headers.sort((function(t,e){const n=parseInt(t.order_id),a=parseInt(e.order_id);return n<a?-1:n>a?1:0})).map(n=>(n.active=!0,n.footnotes=[],t.header_footnotes&&t.header_footnotes.forEach(t=>{t.header_id===n.id&&(n.footnotes.push({number:e,text:t.text}),e++)}),n))}function E(t){if(!t.events)return[];const e=new Date,n=new Date(e);n.setDate(e.getDate()-2);const a=new Date(e);return a.setDate(e.getDate()+130),t.events.filter(t=>t.fields&&t.fields[1]&&new Date(t.fields[1])>=n&&new Date(t.fields[1])<=a).sort((function(t,e){return new Date(t.fields[1])<new Date(e.fields[1])?-1:new Date(t.fields[1])>new Date(e.fields[1])?1:0}))}function $(t,e){if(!t.events)return[];const n=t.events.filter(t=>t.fields&&t.fields[1]&&new Date(t.fields[1]).getFullYear()===e).sort((function(t,e){return new Date(t.fields[1])<new Date(e.fields[1])?-1:new Date(t.fields[1])>new Date(e.fields[1])?1:0})),a=[[],[],[],[]];return n.forEach(t=>{const e=new Date(t.fields[1]).getMonth();a[Math.floor(e/3)].push(t)}),a}function A(t){"function"!=typeof t.getTime&&(t=new Date(t));const e=("0"+(t.getUTCMonth()+1)).slice(-2),n=("0"+t.getUTCDate()).slice(-2);return`${t.getUTCFullYear()}-${e}-${n}`}async function N(t){try{return(await O()(t)).data}catch(t){return console.error(t),alert("Bei der Verbindung zum Server ist ein Fehler aufgetreten! Stelle sicher, dass du eingeloggt bist und versuche es noch einmal."),!1}}O.a.defaults.headers.common["X-WP-Nonce"]=window.eventPlannerApp?window.eventPlannerApp.nonce:null;var I={name:"TableCell",components:{InputField:b,CellContent:x},props:["head","row","tag"],data:function(){return{editMode:!1,currentHeight:!1,cellContent:""}},computed:{htmlTag(){return this.tag||"td"},inlineStyles(){return this.currentHeight?{height:"icons"!==this.head.type?`${this.currentHeight}px`:"auto"}:{}}},methods:{startEdit:function(){this.editMode||(this.currentHeight=this.$el.clientHeight,this.editMode=!0)},stopEdit:async function(){this.editMode=!1,this.currentHeight=!1;const t=await async function(t,e,n,a){if(t&&e&&n)return"date"===a&&(n=A(n)),await N({method:"post",url:`${D}update-event`,data:{event_id:t,header_id:e,content:n}})}(this.row.id,this.head.id,this.cellContent,this.head.type);t&&t.error&&alert(`Beim Bearbeiten ist ein Fehler aufgetreten: ${t.error}`)}},created:function(){this.cellContent=this.row.fields[this.head.id]}},F=(n(59),Object(s.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.htmlTag,{tag:"component",staticClass:"cell",style:t.inlineStyles,on:{click:t.startEdit,focus:t.startEdit}},[t.editMode?n("InputField",{attrs:{type:t.head.type,additional:t.head.additional},on:{stopEditMode:t.stopEdit},model:{value:t.cellContent,callback:function(e){t.cellContent=e},expression:"cellContent"}}):n("div",{staticClass:"cell__content",class:"cell__content--"+t.head.type},[n("CellContent",{attrs:{head:t.head,content:t.cellContent}})],1)],1)}),[],!1,null,"63e354e5",null).exports),V={name:"ArrowToggle",props:["direction"]},P=(n(60),Object(s.a)(V,(function(){var t=this.$createElement;return(this._self._c||t)("i",{staticClass:"arrow",class:"arrow--"+this.direction})}),[],!1,null,"4679a521",null).exports),B={name:"TableGroupHeader",components:{ArrowToggle:P},props:["text","open","cols"]},G=(n(61),Object(s.a)(B,(function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"group-header",class:this.open?"group-header--open":"",attrs:{colspan:this.cols}},[e("ArrowToggle",{attrs:{direction:this.open?"down":"right"}}),this._v(" "),e("strong",[this._v(this._s(this.text))])],1)}),[],!1,null,"112a9942",null).exports),j=n(23),R=n.n(j);var L={name:"TableView",components:{TableHead:o,TableCell:F,TableGroupHeader:G},props:["heads","groups","rows","paginate"],data:()=>({activeGroups:[],page:1,rowsPerPage:2,showActions:window.eventPlannerApp&&window.eventPlannerApp.admin}),computed:{rowsToShow:function(){if(this.paginate){const t=(this.page-1)*this.rowsPerPage,e=t+this.rowsPerPage;return this.rows.slice(t,e)}return this.rows},tableViewClass:function(){return{"table--view-small":this.rowsToShow.length<2}},activeHeads:function(){return this.heads.filter(t=>t.active)}},watch:{activeGroups:function(){localStorage.setItem("activeGroups",JSON.stringify(this.activeGroups))}},mounted:function(){localStorage.getItem("activeGroups")&&(this.activeGroups=JSON.parse(localStorage.getItem("activeGroups"))),this.calcColNum(),window.addEventListener("resize",R()(this.calcColNum,500))},methods:{startGroup:function(t){return this.activeHeads[t].group_id&&(0===t||!this.activeHeads[t-1].group_id)},toggleGroup:function(t){const e=this.activeGroups.indexOf(t);-1!==e?this.activeGroups.splice(e,1):this.activeGroups.push(t)},showRow:function(t){return!t.group_id||this.activeGroups.indexOf(t.group_id)>-1},rowClass:function(t){return{"row--group":t.group_id,"row--highlight":"1"===t.id}},calcColNum:function(){this.rowsPerPage=Math.floor((this.$el.clientWidth-197)/305)},deleteRow:function(t){this.$emit("deleteRow",t)}}},Q=(n(62),Object(s.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-view",class:t.tableViewClass},[n("table",{staticClass:"table"},[n("tbody",[t._l(t.activeHeads,(function(e,a){return[t.startGroup(a)?n("tr",{key:"group_head_"+a,staticClass:"row"},[n("TableGroupHeader",{attrs:{text:t.groups[e.group_id],open:t.activeGroups.indexOf(e.group_id)>-1,cols:t.paginate?t.rowsPerPage+1:2},nativeOn:{click:function(n){return t.toggleGroup(e.group_id)}}})],1):t._e(),t._v(" "),n("tr",{directives:[{name:"show",rawName:"v-show",value:t.showRow(e),expression:"showRow(head)"}],key:e.id,staticClass:"row",class:t.rowClass(e)},[n("TableHead",{attrs:{text:e.name,description:e.description,footnotes:e.footnotes}}),t._v(" "),t._l(t.rowsToShow,(function(t,a){return n("TableCell",{key:"row_"+t.id+"_"+a,attrs:{head:e,row:t}})}))],2)]})),t._v(" "),t.showActions?n("tr",{staticClass:"row"},[n("TableHead",{attrs:{text:"Aktionen"}}),t._v(" "),t._l(t.rowsToShow,(function(e,a){return n("td",{key:e.id,staticClass:"table__cell"},[n("button",{key:"delete_"+e.id+"_"+a,on:{click:function(n){return t.deleteRow(e.id)}}},[t._v("\n                Löschen\n            ")])])}))],2):t._e()],2)]),t._v(" "),t.paginate?n("b-pagination",{attrs:{total:t.rows.length,current:t.page,simple:!1,rounded:!1,"per-page":t.rowsPerPage},on:{"update:current":function(e){t.page=e}}}):t._e()],1)}),[],!1,null,"67af0ec1",null).exports),M={name:"CardView",components:{TableView:Q,ArrowToggle:P},props:["row","heads","groups","index"],data(){return{show:0===this.index}},methods:{toggleShow:function(){this.show=!this.show},deleteRow:function(t){this.$emit("deleteRow",t)}}},J=(n(63),Object(s.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"card"},[n("h2",{staticClass:"card__title",on:{click:t.toggleShow}},[n("ArrowToggle",{staticClass:"arrow--big",attrs:{direction:t.show?"down":"right"}}),t._v("\n        "+t._s(t._f("timestampToLocalString")(t.row.fields[1]))+"\n    ")],1),t._v(" "),n("TableView",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{paginate:!1,rows:[t.row],heads:t.heads.slice(1),groups:t.groups},on:{deleteRow:t.deleteRow}})],1)}),[],!1,null,"14cd11a2",null).exports),z={name:"FootnoteList",props:["heads"],computed:{footnotes:function(){let t=[];return this.heads.forEach(e=>{e.footnotes.forEach(e=>{t.push(e)})}),t}}},q=(n(64),Object(s.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.footnotes.length>0?n("div",{staticClass:"footnotes"},[n("h3",[t._v("Anmerkungen:")]),t._v(" "),n("ol",{staticClass:"footnote__list"},t._l(t.footnotes,(function(e){return n("li",{key:e.number,staticClass:"footnote__item",attrs:{id:"footnote_"+e.number}},[n("sup",[t._v("\n          "+t._s(e.number)+"\n        ")]),t._v("\n        "+t._s(e.text)+"\n    ")])})),0)]):t._e()}),[],!1,null,"2adbd150",null).exports),W={name:"AddButton",components:{Datepicker:r.a},data:function(){return{datepickerTranslations:l.a,showOverlay:!1,date:"",lastDate:new Date}},computed:{formatDate(){if(this.date){return new Date(this.date).toLocaleDateString()}return""}},methods:{addDate(){this.$emit("addDate",this.date),this.lastDate=this.date,this.date=""},addDateAndClose(){this.addDate(),this.date="",this.showOverlay=!1}}},Y=(n(65),Object(s.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:function(e){t.showOverlay=!0}}},[t._v("+ Gottesdienst hinzufügen")]),t._v(" "),n("b-modal",{attrs:{active:t.showOverlay},on:{"update:active":function(e){t.showOverlay=e}}},[n("div",{staticClass:"add"},[t._v("\n            Bitte Datum auswählen:\n            "),n("datepicker",{staticClass:"add__datepicker",attrs:{language:t.datepickerTranslations,inline:!0,"open-date":t.lastDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("div",{staticClass:"add__date"},[t._v("\n                "+t._s(t.formatDate)+"\n            ")]),t._v(" "),n("button",{staticClass:"add__button",attrs:{disabled:!this.date&&"disabled"},on:{click:t.addDate}},[t._v("\n                Hinzufügen\n            ")]),t._v(" "),n("button",{staticClass:"add__button",attrs:{disabled:!this.date&&"disabled"},on:{click:t.addDateAndClose}},[t._v("\n                Hinzufügen & schließen\n            ")])],1)])],1)}),[],!1,null,"ccee0fba",null).exports),U={name:"RowFilters",components:{ArrowToggle:P},props:{heads:{type:Array,required:!0},value:{type:Array,required:!0}},data:()=>({show:!1,actives:[]}),watch:{actives:function(){this.$emit("input",this.actives)},value:function(){this.actives=this.value}},mounted(){this.actives=this.value}},X=(n(66),Object(s.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"filters"},[n("div",{staticClass:"filters__title",on:{click:function(e){t.show=!t.show}}},[n("ArrowToggle",{attrs:{direction:t.show?"down":"right"}}),t._v(" "),n("strong",[t._v("Filter")])],1),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"filters__list"},t._l(t.heads,(function(e,a){return n("li",{key:a,staticClass:"filters__item"},[a>0?n("input",{directives:[{name:"model",rawName:"v-model",value:t.actives[a],expression:"actives[index]"}],attrs:{type:"checkbox",name:"filter",id:"filter_"+a},domProps:{checked:Array.isArray(t.actives[a])?t._i(t.actives[a],null)>-1:t.actives[a]},on:{change:function(e){var n=t.actives[a],i=e.target,s=!!i.checked;if(Array.isArray(n)){var o=t._i(n,null);i.checked?o<0&&t.$set(t.actives,a,n.concat([null])):o>-1&&t.$set(t.actives,a,n.slice(0,o).concat(n.slice(o+1)))}else t.$set(t.actives,a,s)}}}):t._e(),t._v(" "),a>0?n("label",{attrs:{for:"filter_"+a}},[t._v("\n                "+t._s(e.name)+"\n            ")]):t._e()])})),0)])}),[],!1,null,"0c294373",null).exports);const Z={data:()=>({mobile:!0}),async mounted(){this.setMobile(),window.addEventListener("resize",R()(this.setMobile,500))},methods:{setMobile:function(){void 0!==this.$el.clientWidth&&(this.mobile=this.$el.clientWidth<825)}}};var K={name:"EditTable",components:{TableView:Q,CardView:J,AddButton:Y,RowFilters:X,FootnoteList:q},mixins:[Z],data:()=>({heads:[],groups:{},rows:[],activeHeads:[],loaded:!1}),computed:{getActiveHeads:function(){return this.heads.filter(t=>t.active)}},watch:{activeHeads:function(){localStorage.setItem("activeHeads",JSON.stringify(this.activeHeads)),this.heads.forEach((t,e)=>{t.active=this.activeHeads[e]})}},async mounted(){const t=await T();if(!1!==t){if(this.heads=S(t),this.groups=function(t){const e={};return t.header_groups?(t.header_groups.forEach(t=>{e[t.id]=t.name}),e):e}(t),this.rows=E(t),localStorage.getItem("activeHeads")){const t=JSON.parse(localStorage.getItem("activeHeads"));t.length===this.heads.length&&(this.activeHeads=t)}this.activeHeads.length!==this.heads.length&&(this.activeHeads=this.heads.map(()=>!0)),this.loaded=!0}},methods:{addRow:async function(t){const e=await async function(t){if(t){const e=A(t);return await N({method:"post",url:`${D}add-event`,data:{date:e}})}}(t);if(e&&e.success){const t=await T();return this.rows=await E(t),void(this.loaded=!0)}e&&e.error?alert(`Beim Hinzufügen ist ein Fehler aufgetreten: ${e.error}`):alert("Beim Hinzufügen ist ein unbekannter Fehler aufgetreten")},deleteRow:async function(t){if(window.confirm("Diese Veranstaltung und alle ihre Daten werden endgültig gelöscht. Dies kann nicht rueckgängig gemacht werden. Bist du sicher?")){const e=await async function(t){if(t)return await N({method:"delete",url:`${D}delete-event`,data:{event_id:t}})}(t);if(e&&e.success){const t=await T();return void(this.rows=await E(t))}if(e&&e.error)return void alert(`Beim Löschen ist ein Fehler aufgetreten: ${e.error}`);alert("Beim Löschen ist ein unbekannter Fehler aufgetreten")}}}},tt=Object(s.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("RowFilters",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],attrs:{heads:t.heads},model:{value:t.activeHeads,callback:function(e){t.activeHeads=e},expression:"activeHeads"}}),t._v(" "),t.mobile&&t.loaded?n("div",t._l(t.rows,(function(e,a){return n("CardView",{key:a,attrs:{row:e,heads:t.heads,groups:t.groups,index:a},on:{deleteRow:t.deleteRow}})})),1):t.loaded?n("TableView",{attrs:{paginate:!0,heads:t.heads,rows:t.rows,groups:t.groups},on:{deleteRow:t.deleteRow}}):t._e(),t._v(" "),t.loaded?n("AddButton",{on:{addDate:t.addRow}}):t._e(),t._v(" "),n("FootnoteList",{attrs:{heads:t.getActiveHeads}})],1)}),[],!1,null,null,null).exports,et=(n(36),{name:"app",components:{EditTable:tt}}),nt=(n(67),Object(s.a)(et,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"epp_app"}},[e("EditTable")],1)}),[],!1,null,null,null).exports),at={name:"EditButton",components:{TableCell:F},data:function(){return{showOverlay:!1}},props:["row","heads"],methods:{handleClose(){this.$emit("updated")},saveAndClose(){this.$refs.intro.click(),this.showOverlay=!1,this.handleClose()}}},it=(n(68),{name:"StaticTable",components:{CellContent:x,EditButton:Object(s.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:function(e){t.showOverlay=!0}}},[t._v("\n        Bearbeiten\n    ")]),t._v(" "),n("b-modal",{attrs:{active:t.showOverlay},on:{"update:active":function(e){t.showOverlay=e},close:t.handleClose}},[n("div",{staticClass:"edit"},[n("div",{ref:"intro",staticClass:"edit__intro"},[t._v("Zum Bearbeiten auf die Felder klicken.")]),t._v(" "),t._l(t.heads,(function(e){return n("div",{key:e.id},[n("strong",[t._v(t._s(e.name)+":")]),n("br"),t._v(" "),n("TableCell",{staticClass:"edit__cell",attrs:{head:e,row:t.row,tag:"div"}})],1)})),t._v(" "),n("div",{staticClass:"edit__button-wrapper"},[n("button",{staticClass:"edit__button",on:{click:t.saveAndClose}},[t._v("\n                    Speichern & Schließen\n                ")])])],2)])],1)}),[],!1,null,"521dd53e",null).exports,TableGroupHeader:G,RowFilters:X},mixins:[Z],data:()=>({heads:[],activeHeads:[],configStaticFields:[],yearData:[],mobile:!0,activeQuarters:[],years:[(new Date).getFullYear()],loaded:!1}),computed:{getActiveHeads:function(){return this.heads.filter(t=>t.active)}},async mounted(){const t=document.getElementById("epp_app_static_wrapper");t&&(this.years=t.dataset.years.split(",").map(t=>parseInt(t))),this.activeQuarters.push((new Date).getFullYear()+"_"+Math.floor((new Date).getMonth()/3)),await this.setData()},watch:{activeHeads:function(){localStorage.setItem("activeHeadsStatic",JSON.stringify(this.activeHeads)),this.heads.forEach((t,e)=>{t.active=this.activeHeads[e]})}},methods:{async setData(){const t=await T();for(this.configStaticFields=function(t){const e={};return t.config?(t.config.forEach(t=>{if(t.data)try{e[t.name]=JSON.parse(t.data)}catch(n){e[t.name]=t.data}}),e):e}(t).static_fields,this.heads=S(t);this.yearData.length;)this.yearData.pop();if(this.years.forEach(e=>{this.yearData.push({year:e,rowsByQuarter:$(t,e)})}),localStorage.getItem("activeHeadsStatic")){const t=JSON.parse(localStorage.getItem("activeHeadsStatic"));t.length===this.heads.length&&(this.activeHeads=t)}this.activeHeads.length!==this.heads.length&&(this.activeHeads=this.heads.map(t=>this.configStaticFields.indexOf(parseInt(t.id))>-1)),this.loaded=!0},showQuarter(t){return this.activeQuarters.indexOf(t)>-1},toggleQuarter(t){const e=this.activeQuarters.indexOf(t);-1!==e?this.activeQuarters.splice(e,1):this.activeQuarters.push(t)}}}),st=(n(69),{name:"app",components:{StaticTable:Object(s.a)(it,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("RowFilters",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],attrs:{heads:t.heads},model:{value:t.activeHeads,callback:function(e){t.activeHeads=e},expression:"activeHeads"}}),t._v(" "),t._l(t.yearData,(function(e){return[n("h2",{key:"header_"+e.year,staticClass:"header"},[t._v(t._s(e.year))]),t._v(" "),t.getActiveHeads.length>0?n("table",{key:"table_"+e.year,staticClass:"table"},[n("tbody",[t.mobile?[n("tr",[n("th",{staticClass:"cell"},[t._v(" "+t._s(t.heads[0].name))]),t._v(" "),n("th",{staticClass:"cell"},[t._v(" Information ")])]),t._v(" "),t._l(e.rowsByQuarter,(function(a,i){return[n("tr",{key:"quarter_"+i},[n("TableGroupHeader",{attrs:{text:"Quartal "+(i+1),cols:2,open:t.showQuarter(e.year+"_"+i)},nativeOn:{click:function(n){return t.toggleQuarter(e.year+"_"+i)}}})],1),t._v(" "),t.showQuarter(e.year+"_"+i)?t._l(a,(function(e){return n("tr",{key:e.fields[t.heads[0].id]},[n("td",{staticClass:"cell cell--date"},[n("CellContent",{attrs:{head:t.heads[0],content:e.fields[t.heads[0].id]}}),t._v(" "),n("EditButton",{attrs:{heads:t.getActiveHeads.slice(1),row:e},on:{updated:t.setData}})],1),t._v(" "),n("td",{staticClass:"cell"},[n("ul",{staticClass:"list"},t._l(t.getActiveHeads.slice(1),(function(a){return n("li",{key:a.id},[n("strong",[t._v(" "+t._s(a.name)+": ")]),t._v(" "),n("CellContent",{attrs:{head:a,content:e.fields[a.id]}})],1)})),0)])])})):t._e()]}))]:[n("tr",t._l(t.getActiveHeads,(function(e){return n("th",{key:e.id,staticClass:"cell cell--head"},[t._v("\n              "+t._s(e.name)+"\n            ")])})),0),t._v(" "),t._l(e.rowsByQuarter,(function(a,i){return[n("tr",{key:"quarter_"+i},[n("TableGroupHeader",{attrs:{text:"Quartal "+(i+1),cols:t.getActiveHeads.length,open:t.showQuarter(e.year+"_"+i)},nativeOn:{click:function(n){return t.toggleQuarter(e.year+"_"+i)}}})],1),t._v(" "),t.showQuarter(e.year+"_"+i)?t._l(a,(function(e){return n("tr",{key:e.fields[t.heads[0].id]},t._l(t.getActiveHeads,(function(a,i){return n("td",{key:a.id,staticClass:"cell",class:0===i?"cell--date":""},[n("CellContent",{attrs:{head:a,content:e.fields[a.id]}}),t._v(" "),0===i?n("EditButton",{attrs:{heads:t.getActiveHeads.slice(1),row:e},on:{updated:t.setData}}):t._e()],1)})),0)})):t._e()]}))]],2)]):t._e()]}))],2)}),[],!1,null,"62080e2e",null).exports}}),ot=(n(70),Object(s.a)(st,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"epp_app_static"}},[e("StaticTable")],1)}),[],!1,null,null,null).exports),rt=n(37);a.a.config.productionTip=!1,a.a.filter("timestampToLocalString",(function(t){return t?new Date(t).toLocaleDateString():""})),a.a.use(rt.a,{defaultIconPack:"fa"}),document.getElementById("epp_app")&&new a.a(nt).$mount("#epp_app"),document.getElementById("epp_app_static")&&new a.a(ot).$mount("#epp_app_static")}],[[76,0,1]]]);