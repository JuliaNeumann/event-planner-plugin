(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{159:function(e,t,n){},174:function(e,t,n){"use strict";var a=n(59);n.n(a).a},188:function(e,t,n){"use strict";var a=n(60);n.n(a).a},189:function(e,t,n){"use strict";var a=n(61);n.n(a).a},190:function(e,t,n){"use strict";var a=n(62);n.n(a).a},191:function(e,t,n){"use strict";var a=n(63);n.n(a).a},208:function(e,t,n){"use strict";var a=n(64);n.n(a).a},209:function(e,t,n){"use strict";var a=n(65);n.n(a).a},210:function(e,t,n){"use strict";var a=n(66);n.n(a).a},211:function(e,t,n){"use strict";var a=n(67);n.n(a).a},212:function(e,t,n){"use strict";var a=n(68);n.n(a).a},213:function(e,t,n){"use strict";var a=n(69);n.n(a).a},214:function(e,t,n){"use strict";var a=n(70);n.n(a).a},215:function(e,t,n){"use strict";var a=n(71);n.n(a).a},216:function(e,t,n){"use strict";var a=n(72);n.n(a).a},219:function(e,t,n){"use strict";var a=n(73);n.n(a).a},220:function(e,t,n){"use strict";var a=n(74);n.n(a).a},221:function(e,t,n){"use strict";var a=n(75);n.n(a).a},243:function(e,t,n){"use strict";n.r(t);n(15);var a=n(1),r=(n(25),n(32),n(8),n(12),n(26),n(13),n(103),n(33),n(104),n(47),{name:"TableHead",props:{text:{type:String,default:""},description:{type:String,default:""},footnotes:{type:Array,default:function(){return[]}}}}),i=(n(174),n(0)),s=Object(i.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("th",{staticClass:"head"},[e._v("\n    "+e._s(e.text)+"\n    "),e.footnotes?n("sup",e._l(e.footnotes,(function(t){return n("a",{key:t.number,staticClass:"head__footnote",attrs:{href:"#footnote_"+t.number}},[e._v("\n            "+e._s(t.number)+"\n        ")])})),0):e._e(),e._v(" "),e.description?n("small",{staticClass:"head__tooltip"},[e._v("\n        "+e._s(e.description)+"\n    ")]):e._e()])}),[],!1,null,"fb77d4d4",null).exports,o=n(83),c=n(86),u=n(84),l=n.n(u),d={props:["value"],data:function(){return{inputContent:""}},methods:{saveNewValue:function(){this.$emit("input",this.inputContent)}},created:function(){var e=this;this.inputContent=this.value,this.focusOnStart&&this.$nextTick((function(){return e.$el.focus()}))}},f={name:"DateInput",components:{Datepicker:o.a},directives:{ClickOutside:l.a},mixins:[d],data:function(){return{datepickerTranslations:c.a,firstClick:!0}},created:function(){this.inputContent=new Date(this.value)},methods:{saveNewValue:function(e){this.firstClick?this.firstClick=!1:(e&&"function"==typeof e.getTime&&(this.inputContent=e.getTime()),d.methods.saveNewValue.call(this))}}},p=Object(i.a)(f,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("datepicker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.saveNewValue,expression:"saveNewValue"}],attrs:{language:e.datepickerTranslations,inline:!0},on:{selected:e.saveNewValue},model:{value:e.inputContent,callback:function(t){e.inputContent=t},expression:"inputContent"}})}),[],!1,null,null,null).exports,h={name:"SingleLineInput",mixins:[d],data:function(){return{focusOnStart:!0}}},v=(n(188),Object(i.a)(h,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],ref:"inputField",staticClass:"input",attrs:{type:"text"},domProps:{value:e.inputContent},on:{blur:e.saveNewValue,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.saveNewValue(t)},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}})}),[],!1,null,"3e5e94fa",null).exports),m={name:"MultiLineInput",mixins:[d],data:function(){return{focusOnStart:!0}}},w=(n(189),Object(i.a)(m,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],ref:"inputField",staticClass:"textarea",domProps:{value:e.inputContent},on:{blur:e.saveNewValue,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.saveNewValue(t)},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}})}),[],!1,null,"03ef6fb7",null).exports),_={name:"IconInput",directives:{ClickOutside:l.a},mixins:[d],props:{additional:{type:String,default:"[]"}},data:function(){return{firstClick:!0}},computed:{options:function(){return JSON.parse(this.additional)}},created:function(){this.inputContent=this.value?JSON.parse(this.value):[]},methods:{saveNewValue:function(){this.firstClick?this.firstClick=!1:(this.inputContent=this.inputContent&&this.inputContent.length>0?JSON.stringify(this.inputContent):"[]",d.methods.saveNewValue.call(this))}}},g=(n(190),{date:p,text:v,longtext:w,icons:Object(i.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.saveNewValue,expression:"saveNewValue"}],staticClass:"options"},e._l(e.options,(function(t){return n("div",{key:t.name,staticClass:"option"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],attrs:{id:t.icon,type:"checkbox"},domProps:{value:t.icon,checked:Array.isArray(e.inputContent)?e._i(e.inputContent,t.icon)>-1:e.inputContent},on:{change:function(n){var a=e.inputContent,r=n.target,i=!!r.checked;if(Array.isArray(a)){var s=t.icon,o=e._i(a,s);r.checked?o<0&&(e.inputContent=a.concat([s])):o>-1&&(e.inputContent=a.slice(0,o).concat(a.slice(o+1)))}else e.inputContent=i}}}),e._v(" "),n("label",{attrs:{for:t.icon}},[n("i",{staticClass:"fa",class:"fa-"+t.icon}),e._v("\n            "+e._s(t.name)+"\n        ")])])})),0)}),[],!1,null,"5d1280b8",null).exports}),y={name:"InputField",components:{DateInput:p,SingleLineInput:v,MultiLineInput:w},props:{value:{type:String,default:""},type:{type:String,default:"text"},additional:{type:String,default:"[]"}},render:function(e){var t=this;return e(g[this.type],{props:{value:this.value,additional:this.additional},on:{input:function(e){t.$emit("input",e),t.$emit("stopEditMode")}},domProps:{value:t.value}})}},b=Object(i.a)(y,void 0,void 0,!1,null,null,null).exports,C=(n(27),{name:"IconList",props:{icons:{type:String,default:""},additional:{type:String,default:"[]"}},computed:{cleanIcons:function(){var e=this;return(this.icons?JSON.parse(this.icons):[]).filter((function(t){var n=!1;return JSON.parse(e.additional).forEach((function(e){e.icon===t&&(n=!0)})),n}))},descriptions:function(){var e=this,t={};return JSON.parse(this.icons).forEach((function(n){t[n]=!1,JSON.parse(e.additional).forEach((function(e){e.icon===n&&(t[n]=e.name)}))})),t}}}),x=(n(191),{name:"CellContent",components:{IconList:Object(i.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-list"},e._l(e.cleanIcons,(function(t){return n("i",{key:t,staticClass:"fa fa-fw",class:"fa-"+t,attrs:{title:e.descriptions[t]}})})),0)}),[],!1,null,"4f116bc7",null).exports},props:{head:{type:Object,default:function(){}},content:{type:String,default:""}}}),k=Object(i.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",["date"===e.head.type?[e._v("\n        "+e._s(e._f("timestampToLocalString")(e.content))+"\n    ")]:"icons"===e.head.type?[n("IconList",{attrs:{additional:e.head.additional,icons:e.content}})]:[e._v("\n        "+e._s(e.content)+"\n    ")]],2)}),[],!1,null,"14cd3206",null).exports,O=(n(107),n(111),n(34)),S=n.n(O);function H(e,t,n,a,r,i,s){try{var o=e[i](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){H(i,a,r,s,o,"next",e)}function o(e){H(i,a,r,s,o,"throw",e)}s(void 0)}))}}var T=(window.eventPlannerApp?window.eventPlannerApp.rest_url:"http://127.0.0.1:8000/wp-json/")+"event-planner/v1/";function A(){return E.apply(this,arguments)}function E(){return(E=D(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({method:"get",url:"".concat(T,"all")});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){if(!e.headers)return[];var t=1;return e.headers.sort((function(e,t){var n=parseInt(e.order_id),a=parseInt(t.order_id);return n<a?-1:n>a?1:0})).map((function(n){return n.active=!0,n.footnotes=[],e.header_footnotes&&e.header_footnotes.forEach((function(e){e.header_id===n.id&&(n.footnotes.push({number:t,text:e.text}),t++)})),n}))}function N(e){var t={};return e.header_groups?(e.header_groups.forEach((function(e){t[e.id]=e.name})),t):t}function $(e){if(!e.events)return[];var t=new Date,n=new Date(t);n.setDate(t.getDate()-2);var a=new Date(t);return a.setDate(t.getDate()+130),e.events.filter((function(e){return e.fields&&e.fields[1]&&new Date(e.fields[1])>=n&&new Date(e.fields[1])<=a})).sort((function(e,t){return new Date(e.fields[1])<new Date(t.fields[1])?-1:new Date(e.fields[1])>new Date(t.fields[1])?1:0}))}function P(e,t){if(!e.events)return[];var n=e.events.filter((function(e){return e.fields&&e.fields[1]&&new Date(e.fields[1]).getFullYear()===t})).sort((function(e,t){return new Date(e.fields[1])<new Date(t.fields[1])?-1:new Date(e.fields[1])>new Date(t.fields[1])?1:0})),a=[[],[],[],[]];return n.forEach((function(e){var t=new Date(e.fields[1]).getMonth();a[Math.floor(t/3)].push(e)})),a}function I(e){return j.apply(this,arguments)}function j(){return(j=D(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return n=L(t),e.next=4,M({method:"post",url:"".concat(T,"add-event"),data:{date:n}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n,a){return B.apply(this,arguments)}function B(){return(B=D(regeneratorRuntime.mark((function e(t,n,a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n||void 0===a){e.next=5;break}return"date"===r&&(a=L(a)),e.next=4,M({method:"post",url:"".concat(T,"update-event"),data:{event_id:t,header_id:n,content:a}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return G.apply(this,arguments)}function G(){return(G=D(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,M({method:"delete",url:"".concat(T,"delete-event"),data:{event_id:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){"function"!=typeof e.getTime&&(e=new Date(e));var t=("0"+(e.getUTCMonth()+1)).slice(-2),n=("0"+e.getUTCDate()).slice(-2);return"".concat(e.getUTCFullYear(),"-").concat(t,"-").concat(n)}function Q(e){var t={};return e.config?(e.config.forEach((function(e){if(e.data)try{t[e.name]=JSON.parse(e.data)}catch(n){t[e.name]=e.data}})),t):t}function M(e){return J.apply(this,arguments)}function J(){return(J=D(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S()(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("Bei der Verbindung zum Server ist ein Fehler aufgetreten! Stelle sicher, dass du eingeloggt bist und versuche es noch einmal."),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function z(e,t,n,a,r,i,s){try{var o=e[i](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}S.a.defaults.headers.common["X-WP-Nonce"]=window.eventPlannerApp?window.eventPlannerApp.nonce:null;var q,W,Y={name:"TableCell",components:{InputField:b,CellContent:k},props:{head:{type:Object,default:function(){}},row:{type:Object,default:function(){}},tag:{type:String,default:"td"}},data:function(){return{editMode:!1,currentHeight:!1,cellContent:""}},computed:{inlineStyles:function(){return this.currentHeight?{height:"icons"!==this.head.type?"".concat(this.currentHeight,"px"):"auto"}:{}}},created:function(){this.cellContent=this.row.fields[this.head.id]},methods:{startEdit:function(){this.editMode||(this.currentHeight=this.$el.clientHeight,this.editMode=!0)},stopEdit:(q=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editMode=!1,this.currentHeight=!1,e.next=4,F(this.row.id,this.head.id,this.cellContent,this.head.type);case 4:(t=e.sent)&&t.error&&alert("Beim Bearbeiten ist ein Fehler aufgetreten: ".concat(t.error));case 6:case"end":return e.stop()}}),e,this)})),W=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=q.apply(e,t);function i(e){z(r,n,a,i,s,"next",e)}function s(e){z(r,n,a,i,s,"throw",e)}i(void 0)}))},function(){return W.apply(this,arguments)})}},U=(n(208),Object(i.a)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,{tag:"component",staticClass:"cell",style:e.inlineStyles,on:{click:e.startEdit,focus:e.startEdit}},[e.editMode?n("InputField",{attrs:{type:e.head.type,additional:e.head.additional},on:{stopEditMode:e.stopEdit},model:{value:e.cellContent,callback:function(t){e.cellContent=t},expression:"cellContent"}}):n("div",{staticClass:"cell__content",class:"cell__content--"+e.head.type},[n("CellContent",{attrs:{head:e.head,content:e.cellContent}})],1)],1)}),[],!1,null,"da8a78d2",null).exports),X={name:"ArrowToggle",props:{direction:{type:String,default:"right"}}},Z=(n(209),Object(i.a)(X,(function(e,t){return(0,t._c)("i",{staticClass:"arrow",class:"arrow--"+t.props.direction})}),[],!0,null,"983edae8",null).exports),K={name:"TableGroupHeader",components:{ArrowToggle:Z},props:{text:{type:String,default:""},open:{type:Boolean,default:!1},cols:{type:Number,default:2}}},ee=(n(210),Object(i.a)(K,(function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticClass:"group-header",class:this.open?"group-header--open":"",attrs:{colspan:this.cols}},[t("ArrowToggle",{attrs:{direction:this.open?"down":"right"}}),this._v(" "),t("strong",[this._v(this._s(this.text))])],1)}),[],!1,null,"47fa85b4",null).exports),te=n(85),ne=n.n(te),ae={name:"TableView",components:{TableHead:s,TableCell:U,TableGroupHeader:ee},props:{heads:{type:Array,default:function(){return[]}},groups:{type:Object,default:function(){}},rows:{type:Array,default:function(){return[]}},paginate:{type:Boolean,default:!1}},data:function(){return{activeGroups:[],page:1,rowsPerPage:2,showActions:window.eventPlannerApp&&window.eventPlannerApp.admin}},computed:{rowsToShow:function(){if(this.paginate){var e=(this.page-1)*this.rowsPerPage,t=e+this.rowsPerPage;return this.rows.slice(e,t)}return this.rows},tableViewClass:function(){return{"table--view-small":this.rowsToShow.length<2}},activeHeads:function(){return this.heads.filter((function(e){return e.active}))}},watch:{activeGroups:function(){localStorage.setItem("activeGroups",JSON.stringify(this.activeGroups))}},mounted:function(){localStorage.getItem("activeGroups")&&(this.activeGroups=JSON.parse(localStorage.getItem("activeGroups"))),this.calcColNum(),window.addEventListener("resize",ne()(this.calcColNum,500))},methods:{startGroup:function(e){return this.activeHeads[e].group_id&&(0===e||!this.activeHeads[e-1].group_id)},toggleGroup:function(e){var t=this.activeGroups.indexOf(e);-1!==t?this.activeGroups.splice(t,1):this.activeGroups.push(e)},showRow:function(e){return!e.group_id||this.activeGroups.indexOf(e.group_id)>-1},rowClass:function(e){return{"row--group":e.group_id,"row--highlight":"1"===e.id}},calcColNum:function(){this.rowsPerPage=Math.floor((this.$el.clientWidth-197)/305)},deleteRow:function(e){this.$emit("deleteRow",e)}}},re=(n(211),Object(i.a)(ae,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-view",class:e.tableViewClass},[n("table",{staticClass:"table"},[n("tbody",[e._l(e.activeHeads,(function(t,a){return[e.startGroup(a)?n("tr",{key:"group_head_"+a,staticClass:"row"},[n("TableGroupHeader",{attrs:{text:e.groups[t.group_id],open:e.activeGroups.indexOf(t.group_id)>-1,cols:e.paginate?e.rowsPerPage+1:2},nativeOn:{click:function(n){return e.toggleGroup(t.group_id)}}})],1):e._e(),e._v(" "),n("tr",{directives:[{name:"show",rawName:"v-show",value:e.showRow(t),expression:"showRow(head)"}],key:t.id,staticClass:"row",class:e.rowClass(t)},[n("TableHead",{attrs:{text:t.name,description:t.description,footnotes:t.footnotes}}),e._v(" "),e._l(e.rowsToShow,(function(e,a){return n("TableCell",{key:"row_"+e.id+"_"+a,attrs:{head:t,row:e}})}))],2)]})),e._v(" "),e.showActions?n("tr",{staticClass:"row"},[n("TableHead",{attrs:{text:"Aktionen"}}),e._v(" "),e._l(e.rowsToShow,(function(t,a){return n("td",{key:t.id,staticClass:"table__cell"},[n("button",{key:"delete_"+t.id+"_"+a,on:{click:function(n){return e.deleteRow(t.id)}}},[e._v("\n                        Löschen\n                    ")])])}))],2):e._e()],2)]),e._v(" "),e.paginate?n("b-pagination",{attrs:{total:e.rows.length,current:e.page,simple:!1,rounded:!1,"per-page":e.rowsPerPage},on:{"update:current":function(t){e.page=t}}}):e._e()],1)}),[],!1,null,"0f989b28",null).exports),ie={name:"CardView",components:{TableView:re,ArrowToggle:Z},props:{row:{type:Object,default:function(){}},heads:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{show:0===this.index}},methods:{toggleShow:function(){this.show=!this.show},deleteRow:function(e){this.$emit("deleteRow",e)}}},se=(n(212),Object(i.a)(ie,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"card"},[n("h2",{staticClass:"card__title",on:{click:e.toggleShow}},[n("ArrowToggle",{staticClass:"arrow--big",attrs:{direction:e.show?"down":"right"}}),e._v("\n        "+e._s(e._f("timestampToLocalString")(e.row.fields[1]))+"\n    ")],1),e._v(" "),n("TableView",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{paginate:!1,rows:[e.row],heads:e.heads.slice(1),groups:e.groups},on:{deleteRow:e.deleteRow}})],1)}),[],!1,null,"e98b502a",null).exports),oe={name:"FootnoteList",props:{heads:{type:Array,default:function(){return[]}}},computed:{footnotes:function(){var e=[];return this.heads.forEach((function(t){t.footnotes.forEach((function(t){e.push(t)}))})),e}}},ce=(n(213),Object(i.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.footnotes.length>0?n("div",{staticClass:"footnotes"},[n("h3",[e._v("Anmerkungen:")]),e._v(" "),n("ol",{staticClass:"footnote__list"},e._l(e.footnotes,(function(t){return n("li",{key:t.number,staticClass:"footnote__item",attrs:{id:"footnote_"+t.number}},[n("sup",[e._v("\n                "+e._s(t.number)+"\n            ")]),e._v("\n            "+e._s(t.text)+"\n        ")])})),0)]):e._e()}),[],!1,null,"25f278d8",null).exports),ue={name:"AddButton",components:{Datepicker:o.a},data:function(){return{datepickerTranslations:c.a,showOverlay:!1,date:"",lastDate:new Date}},computed:{formatDate:function(){return this.date?new Date(this.date).toLocaleDateString():""}},methods:{addDate:function(){this.$emit("addDate",this.date),this.lastDate=this.date,this.date=""},addDateAndClose:function(){this.addDate(),this.date="",this.showOverlay=!1}}},le=(n(214),Object(i.a)(ue,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(t){e.showOverlay=!0}}},[e._v("\n        + Gottesdienst hinzufügen\n    ")]),e._v(" "),n("b-modal",{attrs:{active:e.showOverlay},on:{"update:active":function(t){e.showOverlay=t}}},[n("div",{staticClass:"add"},[e._v("\n            Bitte Datum auswählen:\n            "),n("datepicker",{staticClass:"add__datepicker",attrs:{language:e.datepickerTranslations,inline:!0,"open-date":e.lastDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),n("div",{staticClass:"add__date"},[e._v("\n                "+e._s(e.formatDate)+"\n            ")]),e._v(" "),n("button",{staticClass:"add__button",attrs:{disabled:!e.date&&"disabled"},on:{click:e.addDate}},[e._v("\n                Hinzufügen\n            ")]),e._v(" "),n("button",{staticClass:"add__button",attrs:{disabled:!e.date&&"disabled"},on:{click:e.addDateAndClose}},[e._v("\n                Hinzufügen & schließen\n            ")])],1)])],1)}),[],!1,null,"5970eaab",null).exports),de={name:"RowFilters",components:{ArrowToggle:Z},props:{heads:{type:Array,required:!0},value:{type:Array,required:!0}},data:function(){return{show:!1,actives:[]}},watch:{actives:function(){this.$emit("input",this.actives)},value:function(){this.actives=this.value}},mounted:function(){this.actives=this.value}},fe=(n(215),Object(i.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filters"},[n("div",{staticClass:"filters__title",on:{click:function(t){e.show=!e.show}}},[n("ArrowToggle",{attrs:{direction:e.show?"down":"right"}}),e._v(" "),n("strong",[e._v("Filter")])],1),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"filters__list"},e._l(e.heads,(function(t,a){return n("li",{key:a,staticClass:"filters__item"},[a>0?n("input",{directives:[{name:"model",rawName:"v-model",value:e.actives[a],expression:"actives[index]"}],attrs:{id:"filter_"+a,type:"checkbox",name:"filter"},domProps:{checked:Array.isArray(e.actives[a])?e._i(e.actives[a],null)>-1:e.actives[a]},on:{change:function(t){var n=e.actives[a],r=t.target,i=!!r.checked;if(Array.isArray(n)){var s=e._i(n,null);r.checked?s<0&&e.$set(e.actives,a,n.concat([null])):s>-1&&e.$set(e.actives,a,n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.actives,a,i)}}}):e._e(),e._v(" "),a>0?n("label",{attrs:{for:"filter_"+a}},[e._v("\n                "+e._s(t.name)+"\n            ")]):e._e()])})),0)])}),[],!1,null,"713feee0",null).exports);function pe(e,t,n,a,r,i,s){try{var o=e[i](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}var he={data:function(){return{mobile:!0}},mounted:function(){var e=this;return function(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){pe(i,a,r,s,o,"next",e)}function o(e){pe(i,a,r,s,o,"throw",e)}s(void 0)}))}}(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setMobile(),window.addEventListener("resize",ne()(e.setMobile,500));case 2:case"end":return t.stop()}}),t)})))()},methods:{setMobile:function(){void 0!==this.$el.clientWidth&&(this.mobile=this.$el.clientWidth<825)}}};function ve(e,t,n,a,r,i,s){try{var o=e[i](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){ve(i,a,r,s,o,"next",e)}function o(e){ve(i,a,r,s,o,"throw",e)}s(void 0)}))}}var we,_e,ge={name:"EditTable",components:{TableView:re,CardView:se,AddButton:le,RowFilters:fe,FootnoteList:ce},mixins:[he],data:function(){return{heads:[],groups:{},rows:[],activeHeads:[],loaded:!1}},computed:{getActiveHeads:function(){return this.heads.filter((function(e){return e.active}))}},watch:{activeHeads:function(){var e=this;localStorage.setItem("activeHeads",JSON.stringify(this.activeHeads)),this.heads.forEach((function(t,n){t.active=e.activeHeads[n]}))}},mounted:function(){var e=this;return me(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:if(!1!==(n=t.sent)){t.next=5;break}return t.abrupt("return");case 5:e.heads=R(n),e.groups=N(n),e.rows=$(n),localStorage.getItem("activeHeads")&&(a=JSON.parse(localStorage.getItem("activeHeads"))).length===e.heads.length&&(e.activeHeads=a),e.activeHeads.length!==e.heads.length&&(e.activeHeads=e.heads.map((function(){return!0}))),e.loaded=!0;case 11:case"end":return t.stop()}}),t)})))()},methods:{addRow:(_e=me(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:if(!(n=e.sent)||!n.success){e.next=12;break}return e.next=6,A();case 6:return a=e.sent,e.next=9,$(a);case 9:return this.rows=e.sent,this.loaded=!0,e.abrupt("return");case 12:if(!n||!n.error){e.next=15;break}return alert("Beim Hinzufügen ist ein Fehler aufgetreten: ".concat(n.error)),e.abrupt("return");case 15:alert("Beim Hinzufügen ist ein unbekannter Fehler aufgetreten");case 16:case"end":return e.stop()}}),e,this)}))),function(e){return _e.apply(this,arguments)}),deleteRow:(we=me(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Diese Veranstaltung und alle ihre Daten werden endgültig gelöscht. Dies kann nicht rueckgängig gemacht werden. Bist du sicher?")){e.next=17;break}return e.next=4,V(t);case 4:if(!(n=e.sent)||!n.success){e.next=13;break}return e.next=8,A();case 8:return a=e.sent,e.next=11,$(a);case 11:return this.rows=e.sent,e.abrupt("return");case 13:if(!n||!n.error){e.next=16;break}return alert("Beim Löschen ist ein Fehler aufgetreten: ".concat(n.error)),e.abrupt("return");case 16:alert("Beim Löschen ist ein unbekannter Fehler aufgetreten");case 17:case"end":return e.stop()}}),e,this)}))),function(e){return we.apply(this,arguments)})}},ye=Object(i.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("RowFilters",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],attrs:{heads:e.heads},model:{value:e.activeHeads,callback:function(t){e.activeHeads=t},expression:"activeHeads"}}),e._v(" "),e.mobile&&e.loaded?n("div",e._l(e.rows,(function(t,a){return n("CardView",{key:a,attrs:{row:t,heads:e.heads,groups:e.groups,index:a},on:{deleteRow:e.deleteRow}})})),1):e.loaded?n("TableView",{attrs:{paginate:!0,heads:e.heads,rows:e.rows,groups:e.groups},on:{deleteRow:e.deleteRow}}):e._e(),e._v(" "),e.loaded?n("AddButton",{on:{addDate:e.addRow}}):e._e(),e._v(" "),n("FootnoteList",{attrs:{heads:e.getActiveHeads}})],1)}),[],!1,null,null,null).exports,be=(n(159),{name:"App",components:{EditTable:ye}}),Ce=(n(216),Object(i.a)(be,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"epp_app"}},[t("EditTable")],1)}),[],!1,null,null,null).exports),xe=(n(110),n(217),{name:"EditButton",components:{TableCell:U},props:{row:{type:Object,default:function(){}},heads:{type:Array,default:function(){return[]}}},data:function(){return{showOverlay:!1}},methods:{handleClose:function(){this.$emit("updated")},saveAndClose:function(){this.$refs.intro.click(),this.showOverlay=!1,this.handleClose()}}});n(219);function ke(e,t,n,a,r,i,s){try{var o=e[i](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){ke(i,a,r,s,o,"next",e)}function o(e){ke(i,a,r,s,o,"throw",e)}s(void 0)}))}}var Se={name:"StaticTable",components:{CellContent:k,EditButton:Object(i.a)(xe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(t){e.showOverlay=!0}}},[e._v("\n        Bearbeiten\n    ")]),e._v(" "),n("b-modal",{attrs:{active:e.showOverlay},on:{"update:active":function(t){e.showOverlay=t},close:e.handleClose}},[n("div",{staticClass:"edit"},[n("div",{ref:"intro",staticClass:"edit__intro"},[e._v("\n                Zum Bearbeiten auf die Felder klicken.\n            ")]),e._v(" "),e._l(e.heads,(function(t){return n("div",{key:t.id},[n("strong",[e._v(e._s(t.name)+":")]),n("br"),e._v(" "),n("TableCell",{staticClass:"edit__cell",attrs:{head:t,row:e.row,tag:"div"}})],1)})),e._v(" "),n("div",{staticClass:"edit__button-wrapper"},[n("button",{staticClass:"edit__button",on:{click:e.saveAndClose}},[e._v("\n                    Speichern & Schließen\n                ")])])],2)])],1)}),[],!1,null,"49efb666",null).exports,TableGroupHeader:ee,RowFilters:fe},mixins:[he],data:function(){return{heads:[],activeHeads:[],configStaticFields:[],yearData:[],mobile:!0,activeQuarters:[],years:[(new Date).getFullYear()],loaded:!1}},computed:{getActiveHeads:function(){return this.heads.filter((function(e){return e.active}))}},watch:{activeHeads:function(){var e=this;localStorage.setItem("activeHeadsStatic",JSON.stringify(this.activeHeads)),this.heads.forEach((function(t,n){t.active=e.activeHeads[n]}))}},mounted:function(){var e=this;return Oe(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=document.getElementById("epp_app_static_wrapper"))&&(e.years=n.dataset.years.split(",").map((function(e){return parseInt(e)}))),e.activeQuarters.push((new Date).getFullYear()+"_"+Math.floor((new Date).getMonth()/3)),t.next=5,e.setData();case 5:case"end":return t.stop()}}),t)})))()},methods:{setData:function(){var e=this;return Oe(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:for(n=t.sent,e.configStaticFields=Q(n).static_fields,e.heads=R(n);e.yearData.length;)e.yearData.pop();e.years.forEach((function(t){e.yearData.push({year:t,rowsByQuarter:P(n,t)})})),localStorage.getItem("activeHeadsStatic")&&(a=JSON.parse(localStorage.getItem("activeHeadsStatic"))).length===e.heads.length&&(e.activeHeads=a),e.activeHeads.length!==e.heads.length&&(e.activeHeads=e.heads.map((function(t){return e.configStaticFields.indexOf(parseInt(t.id))>-1}))),e.loaded=!0;case 10:case"end":return t.stop()}}),t)})))()},showQuarter:function(e){return this.activeQuarters.indexOf(e)>-1},toggleQuarter:function(e){var t=this.activeQuarters.indexOf(e);-1!==t?this.activeQuarters.splice(t,1):this.activeQuarters.push(e)}}},He=(n(220),{name:"App",components:{StaticTable:Object(i.a)(Se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("RowFilters",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],attrs:{heads:e.heads},model:{value:e.activeHeads,callback:function(t){e.activeHeads=t},expression:"activeHeads"}}),e._v(" "),e._l(e.yearData,(function(t){return[n("h2",{key:"header_"+t.year,staticClass:"header"},[e._v("\n            "+e._s(t.year)+"\n        ")]),e._v(" "),e.getActiveHeads.length>0?n("table",{key:"table_"+t.year,staticClass:"table"},[n("tbody",[e.mobile?[n("tr",[n("th",{staticClass:"cell"},[e._v("\n                            "+e._s(e.heads[0].name)+"\n                        ")]),e._v(" "),n("th",{staticClass:"cell"},[e._v("\n                            Information\n                        ")])]),e._v(" "),e._l(t.rowsByQuarter,(function(a,r){return[n("tr",{key:"quarter_"+r},[n("TableGroupHeader",{attrs:{text:"Quartal "+(r+1),cols:2,open:e.showQuarter(t.year+"_"+r)},nativeOn:{click:function(n){return e.toggleQuarter(t.year+"_"+r)}}})],1),e._v(" "),e.showQuarter(t.year+"_"+r)?e._l(a,(function(t){return n("tr",{key:t.fields[e.heads[0].id]},[n("td",{staticClass:"cell cell--date"},[n("CellContent",{attrs:{head:e.heads[0],content:t.fields[e.heads[0].id]}}),e._v(" "),n("EditButton",{attrs:{heads:e.getActiveHeads.slice(1),row:t},on:{updated:e.setData}})],1),e._v(" "),n("td",{staticClass:"cell"},[n("ul",{staticClass:"list"},e._l(e.getActiveHeads.slice(1),(function(a){return n("li",{key:a.id},[n("strong",[e._v(" "+e._s(a.name)+": ")]),e._v(" "),n("CellContent",{attrs:{head:a,content:t.fields[a.id]}})],1)})),0)])])})):e._e()]}))]:[n("tr",e._l(e.getActiveHeads,(function(t){return n("th",{key:t.id,staticClass:"cell cell--head"},[e._v("\n                            "+e._s(t.name)+"\n                        ")])})),0),e._v(" "),e._l(t.rowsByQuarter,(function(a,r){return[n("tr",{key:"quarter_"+r},[n("TableGroupHeader",{attrs:{text:"Quartal "+(r+1),cols:e.getActiveHeads.length,open:e.showQuarter(t.year+"_"+r)},nativeOn:{click:function(n){return e.toggleQuarter(t.year+"_"+r)}}})],1),e._v(" "),e.showQuarter(t.year+"_"+r)?e._l(a,(function(t){return n("tr",{key:t.fields[e.heads[0].id]},e._l(e.getActiveHeads,(function(a,r){return n("td",{key:a.id,staticClass:"cell",class:0===r?"cell--date":""},[n("CellContent",{attrs:{head:a,content:t.fields[a.id]}}),e._v(" "),0===r?n("EditButton",{attrs:{heads:e.getActiveHeads.slice(1),row:t},on:{updated:e.setData}}):e._e()],1)})),0)})):e._e()]}))]],2)]):e._e()]}))],2)}),[],!1,null,"8aaef89a",null).exports}}),De=(n(221),Object(i.a)(He,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"epp_app_static"}},[t("StaticTable")],1)}),[],!1,null,null,null).exports),Te=n(161);a.a.config.productionTip=!1,a.a.filter("timestampToLocalString",(function(e){return e?new Date(e).toLocaleDateString():""})),a.a.use(Te.a,{defaultIconPack:"fa"}),document.getElementById("epp_app")&&new a.a(Ce).$mount("#epp_app"),document.getElementById("epp_app_static")&&new a.a(De).$mount("#epp_app_static")},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){}},[[243,0,1]]]);
