(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{22:function(e,t,a){var n=a(77);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(39).default)("2904e971",n,!0,{})},76:function(e,t,a){"use strict";var n=a(22);a.n(n).a},77:function(e,t,a){(e.exports=a(38)(!1)).push([e.i,".table-header-form[data-v-342b8e32] {\n  border: 1px solid gray;\n  padding: 10px;\n  margin-bottom: 15px;\n  max-width: 1000px;\n}\n.table-header-form__field[data-v-342b8e32] {\n  display: inline-block;\n  padding-right: 15px;\n  padding-bottom: 10px;\n}\n.table-header-form__field--block[data-v-342b8e32] {\n  display: flex;\n  align-items: baseline;\n  padding-right: 0;\n}\n.table-header-form__field--block .table-header-form__label[data-v-342b8e32] {\n  flex-grow: 0;\n}\n.table-header-form__field--block .table-header-form__input[data-v-342b8e32] {\n  flex-grow: 1;\n}\n.table-header-form__button[data-v-342b8e32] {\n  margin: 10px 10px 0 0;\n}\n",""])},81:function(e,t,a){"use strict";a.r(t);var n=a(1),r={name:"App"},i=a(0),s=Object(i.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"vue-backend-app"}},[t("h1",[this._v("Event Planner")]),this._v(" "),t("router-view")],1)}),[],!1,null,null,null).exports,d=a(27),o={name:"IconsForm",props:{icons:Array},data(){return{modeledIcons:this.icons.map(e=>Object.assign({},e))}},methods:{addIcon(){const e=prompt("Gib den Fontawesome Icon Name an: ");e?this.modeledIcons.push({icon:e,name:e}):null!==e&&alert("Du musst einen Icon Namen für das neue Icon angeben!")},deleteIcon(e){window.confirm('Dieses Icon wirklich loeschen? (Wird erst endgültig gespeichert, wenn du auf "Speichern" geklickt hast.)')&&this.modeledIcons.splice(e,1)}}},l=Object(i.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icons-form"},[e._l(e.modeledIcons,(function(t,n){return a("div",{key:t.icon+"_"+n,staticClass:"icons-form__icon"},[a("i",{class:"fa fa-fw fa-"+t.icon}),e._v("\n     "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"icon.name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(a){a.target.composing||e.$set(t,"name",a.target.value)}}}),e._v("\n     "),a("button",{attrs:{type:"button"},on:{click:function(t){return e.deleteIcon(n)}}},[a("i",{staticClass:"fa fa-fw fa-trash"}),e._v(" Löschen")])])})),e._v(" "),a("button",{attrs:{type:"button"},on:{click:e.addIcon}},[e._v("Icon hinzufügen")]),e._v(" "),a("a",{attrs:{href:"https://fontawesome.com/icons?d=gallery&m=free",target:"_blank"}},[e._v("Hier kannst du sehen, welche Icons es gibt.")])],2)}),[],!1,null,"5df310c2",null).exports,c=a(3),u=a.n(c);const m=(window.eventPlannerApp?window.eventPlannerApp.rest_url:"http://127.0.0.1:8000/wp-json/")+"event-planner/v1/";async function p(e){try{return(await u()(e)).data}catch(e){return console.error(e),{error:"Bei der Verbindung zum Server ist ein Fehler aufgetreten! Stelle sicher, dass du als Admin eingeloggt bist und versuche es noch einmal."}}}u.a.defaults.headers.common["X-WP-Nonce"]=window.eventPlannerApp?window.eventPlannerApp.nonce:null;var h={name:"TableHeaderForm",components:{IconsForm:l},props:{isFirst:Boolean,id:String,name:String,order_id:String,group_id:String,type:String,additional:String,description:String},data(){return{modelName:this.name,modelOrderId:this.order_id,modelType:this.type,modelDescription:this.description}},methods:{async saveHeader(){const e=await async function(e){return e.id?await p({method:"post",url:`${m}update-header`,data:e}):(console.error("updateHeader failed because no header id was given!"),{error:"Es fehlen Daten, um die Änderungen zu speichern!"})}({id:this.id,name:this.modelName,order_id:this.modelOrderId,type:this.modelType,additional:"icons"===this.modelType?JSON.stringify(this.$refs.icons.modeledIcons):"",description:this.modelDescription});e&&e.error?alert(`Beim Bearbeiten ist ein Fehler aufgetreten: ${e.error}`):e&&e.success?(alert("Änderungen gespeichert!"),this.$emit("delete")):(console.error(e),alert("Es ist ein unbekannter Fehler aufgetreten!"))},async deleteHeader(){if(window.confirm("Dieser Tabellenkopf und alle zugehörigen Tabbellendaten werden endgültig gelöscht. Dies kann nicht rueckgängig gemacht werden. Bist du sicher?")){const e=await async function(e){return e?await p({method:"delete",url:`${m}delete-header`,data:{id:e}}):(console.error("deleteHeader failed because no header id was given!"),{error:"Es fehlen Daten, um den Header zu löschen!"})}(this.id);if(e&&e.success)return alert("Tabellenkopf und zueghörige Daten wurden gelöscht!"),void this.$emit("delete");if(e&&e.error)return void alert(`Beim Löschen ist ein Fehler aufgetreten: ${e.error}`);alert("Beim Löschen ist ein unbekannter Fehler aufgetreten")}}}},f=(a(76),{name:"EditTableHeaders",components:{TableHeaderForm:Object(i.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"table-header-form"},[e.isFirst?a("div",{staticClass:"table-header-form__field table-header-form__field--block"},[a("i",{staticClass:"fa fa-info-circle"}),e._v("  "),a("strong",[e._v("Der erste Tabellenkopf muss immer das Datum der Veranstaltung enthalten. Deswegen kann hier nur der Name und die Beschreibung geändert werden.")])]):e._e(),e._v(" "),a("div",{staticClass:"table-header-form__field"},[a("label",{staticClass:"table-header-form__label",attrs:{for:"header_name_"+e.id}},[e._v("Name: ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.modelName,expression:"modelName"}],staticClass:"table-header-form__input",attrs:{type:"text",id:"header_name_"+e.id},domProps:{value:e.modelName},on:{input:function(t){t.target.composing||(e.modelName=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"table-header-form__field"},[a("label",{staticClass:"table-header-form__label",attrs:{for:"header_type_"+e.id}},[e._v("\n      Typ: "),a("i",{staticClass:"fa fa-info-circle",attrs:{title:"Da je nach Typ unterschiedliche Daten in der Tabelle gespeichert werden, kann das Ändern des Typs zu unvorhergesehen Ergebnissen führen. Also am Besten nur ändern, wenn du weißt, was du tust."}}),e._v(" \n    ")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.modelType,expression:"modelType"}],staticClass:"table-header-form__input",attrs:{id:"header_type_"+e.id,disabled:e.isFirst},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.modelType=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"date"}},[e._v("Datum")]),e._v(" "),a("option",{attrs:{value:"text"}},[e._v("Text")]),e._v(" "),a("option",{attrs:{value:"longtext"}},[e._v("Mehrzeiliger Text")]),e._v(" "),a("option",{attrs:{value:"icons"}},[e._v("Icons")])])]),e._v(" "),a("div",{staticClass:"table-header-form__field"},[a("label",{staticClass:"table-header-form__label",attrs:{for:"header_order_"+e.id}},[e._v("Reihenfolge: ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.modelOrderId,expression:"modelOrderId"}],staticClass:"table-header-form__input",attrs:{type:"number",id:"header_order_"+e.id,disabled:e.isFirst,min:e.isFirst?1:2,step:"1"},domProps:{value:e.modelOrderId},on:{input:function(t){t.target.composing||(e.modelOrderId=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"table-header-form__field table-header-form__field--block"},[a("label",{staticClass:"table-header-form__label",attrs:{for:"header_description_"+e.id}},[e._v("\n      Beschreibung: "),a("i",{staticClass:"fa fa-info-circle",attrs:{title:"Die Beschreibung wird - wenn vorhanden - angezeigt, wenn sich die Maus über dem Tabellenkopf befindet."}}),e._v(" \n    ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.modelDescription,expression:"modelDescription"}],staticClass:"table-header-form__input",attrs:{type:"text",id:"header_description_"+e.id},domProps:{value:e.modelDescription},on:{input:function(t){t.target.composing||(e.modelDescription=t.target.value)}}})]),e._v(" "),"icons"===e.type?a("div",{staticClass:"table-header-form__field table-header-form__field--block"},[a("label",{staticClass:"table-header-form__label",attrs:{for:"header_description_"+e.id}},[e._v("\n      Icons:\n    ")]),e._v(" "),a("IconsForm",{ref:"icons",attrs:{icons:JSON.parse(e.additional||"[]")}})],1):e._e(),e._v(" "),a("div",{staticClass:"table-header-form__field table-header-form__field--block"},[a("button",{staticClass:"table-header-form__button",attrs:{type:"button"},on:{click:e.saveHeader}},[a("i",{staticClass:"fa fa-fw fa-save"}),e._v(" Speichern\n      ")]),e._v(" "),a("button",{staticClass:"table-header-form__button",attrs:{type:"button"},on:{click:e.deleteHeader}},[a("i",{staticClass:"fa fa-fw fa-trash"}),e._v(" Löschen\n      ")])])])}),[],!1,null,"342b8e32",null).exports},data:()=>({headers:[]}),async created(){await this.loadHeaders()},computed:{orderedHeaders(){return this.headers.sort((function(e,t){const a=parseInt(e.order_id),n=parseInt(t.order_id);return a<n?-1:a>n?1:0}))}},methods:{async loadHeaders(){this.headers=await async function(){return await p({method:"get",url:`${m}headers`})}()},async addNewHeader(){const e=prompt("Wie soll der neue Tabellenkopf heißen?");if(e){const t=parseInt(this.orderedHeaders[this.orderedHeaders.length-1].order_id),a=await async function(e,t){return await p({method:"post",url:`${m}add-header`,data:{name:e,order_id:t,type:"text",additional:"",description:""}})}(e,t+1);if(a&&a.success)return alert("Tabellenkopf wurde angelegt!"),void await this.loadHeaders();if(a&&a.error)return void alert(`Beim Anlegen ist ein Fehler aufgetreten: ${a.error}`);alert("Beim Anlegen ist ein unbekannter Fehler aufgetreten")}else null!==e&&alert("Bitte gib einen Namen an, wenn du einen Tabellenkopf hinzufügen willst!")}}}),_=Object(i.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-table-headers"},[a("h2",[e._v("Tabellenköpfe bearbeiten")]),e._v(" "),e._l(e.orderedHeaders,(function(t,n){return a("TableHeaderForm",e._b({key:"header_"+t.id,attrs:{isFirst:0===n},on:{delete:e.loadHeaders,update:e.loadHeaders}},"TableHeaderForm",t,!1))})),e._v(" "),a("button",{staticClass:"edit-table-headers__add",attrs:{type:"button"},on:{click:e.addNewHeader}},[e._v("Tabellenkopf hinzufügen")])],2)}),[],!1,null,"f9fce0c2",null).exports,b={name:"EditTeaser",data:()=>({})},v=Object(i.a)(b,(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-settings"},[t("h2",[this._v("Teaser bearbeiten")])])}],!1,null,"926af922",null).exports;n.a.use(d.a);var g=new d.a({routes:[{path:"/",name:"EditTableHeaders",component:_},{path:"/teaser",name:"EditTeaser",component:v}]});var w=function(e){var t=jQuery;let a=t("#toplevel_page_"+e),n=window.location.href,r=n.substr(n.indexOf("admin.php"));a.on("click","a",(function(){var e=t(this);t("ul.wp-submenu li",a).removeClass("current"),e.hasClass("wp-has-submenu")?t("li.wp-first-item",a).addClass("current"):e.parents("li").addClass("current")})),t("ul.wp-submenu a",a).each((function(e,a){t(a).attr("href")!==r||t(a).parent().addClass("current")}))};n.a.config.productionTip=!1,new n.a({el:"#vue-admin-app",router:g,render:e=>e(s)}),w("vue-app")}},[[81,0,1]]]);