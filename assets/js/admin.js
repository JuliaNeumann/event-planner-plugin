(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{24:function(e,t,n){var a=n(83);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(4).default)("8889de24",a,!0,{})},25:function(e,t,n){var a=n(85);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(4).default)("38985e0f",a,!0,{})},26:function(e,t,n){var a=n(87);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(4).default)("35fef8c1",a,!0,{})},27:function(e,t,n){var a=n(89);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(4).default)("8b8b94ac",a,!0,{})},28:function(e,t,n){var a=n(91);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(4).default)("e80a4492",a,!0,{})},29:function(e,t,n){var a=n(93);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(4).default)("73dd76b6",a,!0,{})},30:function(e,t,n){var a=n(95);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(4).default)("7c3d9e3c",a,!0,{})},82:function(e,t,n){"use strict";var a=n(24);n.n(a).a},83:function(e,t,n){(t=n(3)(!1)).push([e.i,".table-header-form[data-v-c44d7990] {\n  border: 1px solid gray;\n  padding: 10px;\n  margin-bottom: 15px;\n  max-width: 1000px;\n}\n.table-header-form__field[data-v-c44d7990] {\n  display: inline-block;\n  padding-right: 15px;\n  padding-bottom: 10px;\n}\n.table-header-form__field--block[data-v-c44d7990] {\n  display: flex;\n  align-items: baseline;\n  padding-right: 0;\n}\n.table-header-form__field--block .table-header-form__label[data-v-c44d7990] {\n  flex-grow: 0;\n}\n.table-header-form__field--block .table-header-form__input[data-v-c44d7990] {\n  flex-grow: 1;\n}\n.table-header-form__button[data-v-c44d7990] {\n  margin: 10px 10px 0 0;\n}\n",""]),e.exports=t},84:function(e,t,n){"use strict";var a=n(25);n.n(a).a},85:function(e,t,n){(t=n(3)(!1)).push([e.i,".table-group-form[data-v-69bb2e6e] {\n  border: 1px solid gray;\n  padding: 10px;\n  margin-bottom: 15px;\n  max-width: 1000px;\n}\n.table-group-form__field[data-v-69bb2e6e] {\n  padding-bottom: 10px;\n}\n.table-group-form__headers[data-v-69bb2e6e] {\n  display: flex;\n  padding-bottom: 10px;\n}\n.table-group-form__headers-title[data-v-69bb2e6e] {\n  flex-grow: 0;\n  padding-right: 10px;\n}\n.table-group-form__headers-list[data-v-69bb2e6e] {\n  flex-grow: 1;\n  margin: 0;\n  list-style-type: disc;\n  padding-left: 20px;\n}\n",""]),e.exports=t},86:function(e,t,n){"use strict";var a=n(26);n.n(a).a},87:function(e,t,n){(t=n(3)(!1)).push([e.i,".edit-table-groups__hint[data-v-485eab0b] {\n  display: block;\n  padding-bottom: 15px;\n}\n",""]),e.exports=t},88:function(e,t,n){"use strict";var a=n(27);n.n(a).a},89:function(e,t,n){(t=n(3)(!1)).push([e.i,".teaser-form__field[data-v-0858f0a4] {\n  padding: 10px;\n  max-width: 1000px;\n  border: 1px solid gray;\n  margin-bottom: 15px;\n}\n.teaser-form__text[data-v-0858f0a4] {\n  margin: 0 0 10px;\n}\n",""]),e.exports=t},90:function(e,t,n){"use strict";var a=n(28);n.n(a).a},91:function(e,t,n){(t=n(3)(!1)).push([e.i,".footnotes-form[data-v-11fa8c52] {\n  border: 1px solid gray;\n  padding: 10px;\n  margin-bottom: 15px;\n  max-width: 1000px;\n}\n.footnotes-form__field[data-v-11fa8c52] {\n  display: flex;\n  padding: 5px 0;\n}\n.footnotes-form__input[data-v-11fa8c52] {\n  flex-grow: 1;\n}\n.footnotes-form__button[data-v-11fa8c52] {\n  flex-grow: 0;\n}\n.footnotes-form__button[data-v-11fa8c52]:not(:first-child) {\n  margin-left: 5px;\n}\n",""]),e.exports=t},92:function(e,t,n){"use strict";var a=n(29);n.n(a).a},93:function(e,t,n){(t=n(3)(!1)).push([e.i,".settings-form__field[data-v-490e3f17] {\n  padding: 10px;\n  max-width: 1000px;\n  border: 1px solid gray;\n  margin-bottom: 15px;\n}\n.settings-form__header[data-v-490e3f17]:first-child {\n  padding-top: 10px;\n}\n",""]),e.exports=t},94:function(e,t,n){"use strict";var a=n(30);n.n(a).a},95:function(e,t,n){(t=n(3)(!1)).push([e.i,".edit-settings__list[data-v-f48f19d2] {\n  list-style: disc;\n  padding-inline-start: 40px;\n}\n",""]),e.exports=t},99:function(e,t,n){"use strict";n.r(t);var a=n(1),r={name:"App"},o=n(0),i=Object(o.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"vue-backend-app"}},[t("h1",[this._v("Event Planner")]),this._v(" "),t("router-view")],1)}),[],!1,null,null,null).exports,s=n(35),d={name:"IconsForm",props:{icons:{type:Array,default:()=>[]}},data(){return{modeledIcons:this.icons.map(e=>Object.assign({},e))}},methods:{addIcon(){const e=prompt("Gib den Fontawesome Icon Name an: ");e?this.modeledIcons.push({icon:e,name:"[Beschreibung]"}):null!==e&&alert("Du musst einen Icon Namen für das neue Icon angeben!")},deleteIcon(e){window.confirm('Dieses Icon wirklich loeschen? (Wird erst endgültig gespeichert, wenn du auf "Speichern" geklickt hast.)')&&this.modeledIcons.splice(e,1)}}},l=Object(o.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icons-form"},[e._l(e.modeledIcons,(function(t,a){return n("div",{key:t.icon+"_"+a,staticClass:"icons-form__icon"},[n("i",{class:"fa fa-fw fa-"+t.icon}),e._v(" \n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"icon.name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}}),e._v(" \n        "),n("DeleteButton",{nativeOn:{click:function(t){return e.deleteIcon(a)}}})],1)})),e._v(" "),n("AddButton",{attrs:{text:"Icon hinzufügen"},nativeOn:{click:function(t){return e.addIcon(t)}}}),e._v(" "),n("a",{attrs:{href:"https://fontawesome.com/icons?d=gallery&m=free",target:"_blank"}},[e._v("Hier kannst du sehen, welche Icons es gibt.")])],2)}),[],!1,null,"fb0fd5de",null).exports,u=n(5),c=n.n(u);const m=(window.eventPlannerApp?window.eventPlannerApp.rest_url:"http://127.0.0.1:8000/wp-json/")+"event-planner/v1/";async function f(){return await _({method:"get",url:`${m}headers`})}async function h(){return await _({method:"get",url:`${m}config`})}async function p(e){return e?await _({method:"post",url:`${m}update-config`,data:e}):(console.error("updateConfig failed because no config was not given!"),{error:"Es fehlen Daten, um die Änderungen zu speichern!"})}async function _(e){try{return(await c()(e)).data}catch(e){return console.error(e),{error:"Bei der Verbindung zum Server ist ein Fehler aufgetreten! Stelle sicher, dass du als Admin eingeloggt bist und versuche es noch einmal."}}}c.a.defaults.headers.common["X-WP-Nonce"]=window.eventPlannerApp?window.eventPlannerApp.nonce:null;var v={name:"TableHeaderForm",components:{IconsForm:l},props:{isFirst:{type:Boolean,default:!1},id:{type:String,default:""},name:{type:String,default:""},order_id:{type:String,default:""},group_id:{type:String,default:""},type:{type:String,default:""},additional:{type:String,default:""},description:{type:String,default:""}},data(){return{modelName:this.name,modelOrderId:this.order_id,modelType:this.type,modelDescription:this.description,infoTextForType:"Da je nach Typ unterschiedliche Daten in der Tabelle gespeichert werden, kann das nachträgliche Ändern des Typs zu unvorhergesehen Ergebnissen führen. Also am Besten nur ändern, wenn du weißt, was du tust.",infoForDescription:"Die Beschreibung wird - wenn vorhanden - angezeigt, wenn sich die Maus über dem Tabellenkopf befindet."}},methods:{async saveHeader(){const e=await async function(e){return e.id?await _({method:"post",url:`${m}update-header`,data:e}):(console.error("updateHeader failed because no header id was given!"),{error:"Es fehlen Daten, um die Änderungen zu speichern!"})}({id:this.id,name:this.modelName,order_id:this.modelOrderId,type:this.modelType,additional:"icons"===this.modelType?JSON.stringify(this.$refs.icons.modeledIcons):"",description:this.modelDescription});e&&e.error?alert(`Beim Bearbeiten ist ein Fehler aufgetreten: ${e.error}`):e&&e.success?(alert("Änderungen gespeichert!"),this.$emit("delete")):(console.error(e),alert("Es ist ein unbekannter Fehler aufgetreten!"))},async deleteHeader(){if(window.confirm("Dieser Tabellenkopf und alle zugehörigen Tabellendaten werden endgültig gelöscht. Dies kann nicht rueckgängig gemacht werden. Bist du sicher?")){const e=await async function(e){return e?await _({method:"delete",url:`${m}delete-header`,data:{id:e}}):(console.error("deleteHeader failed because no header id was given!"),{error:"Es fehlen Daten, um den Tabellenkopf zu löschen!"})}(this.id);if(e&&e.success)return alert("Tabellenkopf und zugehörige Daten wurden gelöscht!"),void this.$emit("delete");if(e&&e.error)return void alert(`Beim Löschen ist ein Fehler aufgetreten: ${e.error}`);alert("Beim Löschen ist ein unbekannter Fehler aufgetreten")}}}};n(82);function g(e,t){const n=parseInt(e.order_id),a=parseInt(t.order_id);return n<a?-1:n>a?1:0}var b={name:"EditTableHeaders",components:{TableHeaderForm:Object(o.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"table-header-form"},[e.isFirst?n("div",{staticClass:"table-header-form__field table-header-form__field--block"},[n("i",{staticClass:"fa fa-info-circle"}),e._v(" \n        "),n("strong",[e._v("Der erste Tabellenkopf muss immer das Datum der Veranstaltung enthalten.\n            Deswegen kann hier nur der Name und die Beschreibung geändert werden.")])]):e._e(),e._v(" "),n("div",{staticClass:"table-header-form__field"},[n("label",{staticClass:"table-header-form__label",attrs:{for:"header_name_"+e.id}},[e._v("Name: ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelName,expression:"modelName"}],staticClass:"table-header-form__input",attrs:{id:"header_name_"+e.id,type:"text"},domProps:{value:e.modelName},on:{input:function(t){t.target.composing||(e.modelName=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"table-header-form__field"},[n("label",{staticClass:"table-header-form__label",attrs:{for:"header_type_"+e.id}},[e._v("\n            Typ: "),n("i",{staticClass:"fa fa-info-circle",attrs:{title:e.infoTextForType}}),e._v(" \n        ")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.modelType,expression:"modelType"}],staticClass:"table-header-form__input",attrs:{id:"header_type_"+e.id,disabled:e.isFirst},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.modelType=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"date"}},[e._v("\n                Datum\n            ")]),e._v(" "),n("option",{attrs:{value:"text"}},[e._v("\n                Text\n            ")]),e._v(" "),n("option",{attrs:{value:"longtext"}},[e._v("\n                Mehrzeiliger Text\n            ")]),e._v(" "),n("option",{attrs:{value:"icons"}},[e._v("\n                Icons\n            ")])])]),e._v(" "),n("div",{staticClass:"table-header-form__field"},[n("label",{staticClass:"table-header-form__label",attrs:{for:"header_order_"+e.id}},[e._v("Reihenfolge: ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelOrderId,expression:"modelOrderId"}],staticClass:"table-header-form__input",attrs:{id:"header_order_"+e.id,type:"number",disabled:e.isFirst,min:e.isFirst?1:2,step:"1"},domProps:{value:e.modelOrderId},on:{input:function(t){t.target.composing||(e.modelOrderId=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"table-header-form__field table-header-form__field--block"},[n("label",{staticClass:"table-header-form__label",attrs:{for:"header_description_"+e.id}},[e._v("\n            Beschreibung: "),n("i",{staticClass:"fa fa-info-circle",attrs:{title:e.infoForDescription}}),e._v(" \n        ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelDescription,expression:"modelDescription"}],staticClass:"table-header-form__input",attrs:{id:"header_description_"+e.id,type:"text"},domProps:{value:e.modelDescription},on:{input:function(t){t.target.composing||(e.modelDescription=t.target.value)}}})]),e._v(" "),"icons"===e.modelType?n("div",{staticClass:"table-header-form__field table-header-form__field--block"},[n("label",{staticClass:"table-header-form__label"},[e._v("\n            Icons:\n        ")]),e._v(" "),n("IconsForm",{ref:"icons",attrs:{icons:JSON.parse(e.additional||"[]")}})],1):e._e(),e._v(" "),n("div",{staticClass:"table-header-form__field table-header-form__field--block"},[n("SaveButton",{staticClass:"table-header-form__button",nativeOn:{click:function(t){return e.saveHeader(t)}}}),e._v(" "),e.isFirst?e._e():n("DeleteButton",{staticClass:"table-header-form__button",nativeOn:{click:function(t){return e.deleteHeader(t)}}})],1)])}),[],!1,null,"c44d7990",null).exports},data:()=>({headers:[]}),computed:{orderedHeaders(){return[...this.headers].sort(g)}},async created(){await this.loadHeaders()},methods:{async loadHeaders(){this.headers=await f()},async addNewHeader(){const e=prompt("Wie soll der neue Tabellenkopf heißen?");if(e){const t=parseInt(this.orderedHeaders[this.orderedHeaders.length-1].order_id),n=await async function(e,t){return await _({method:"post",url:`${m}add-header`,data:{name:e,order_id:t,type:"text",additional:"",description:""}})}(e,t+1);if(n&&n.success)return alert("Tabellenkopf wurde angelegt!"),void await this.loadHeaders();if(n&&n.error)return void alert(`Beim Anlegen ist ein Fehler aufgetreten: ${n.error}`);alert("Beim Anlegen ist ein unbekannter Fehler aufgetreten")}else null!==e&&alert("Bitte gib einen Namen an, wenn du einen Tabellenkopf hinzufügen willst!")}}},w=Object(o.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-table-headers"},[n("h2",[e._v("Tabellenköpfe bearbeiten")]),e._v(" "),e._l(e.orderedHeaders,(function(t){return n("TableHeaderForm",e._b({key:"header_"+t.id,attrs:{"is-first":"1"===t.order_id},on:{delete:e.loadHeaders,update:e.loadHeaders}},"TableHeaderForm",t,!1))})),e._v(" "),n("AddButton",{staticClass:"edit-table-headers__add",attrs:{text:"Tabellenkopf hinzufügen"},nativeOn:{click:function(t){return e.addNewHeader(t)}}})],2)}),[],!1,null,"19c5e12e",null).exports,x={name:"TableGroupForm",props:{headers:{type:Array,default:()=>[]},id:{type:String,default:""},name:{type:String,default:""}},data(){return{modelName:this.name,modelAddHeader:"",addedHeaders:[],deletedHeaders:[]}},computed:{groupHeaders(){return this.headers.filter(e=>e.group_id===this.id&&-1===this.deletedHeaders.indexOf(e.id)||this.addedHeaders.indexOf(e.id)>-1).sort(g)},nonGroupHeaders(){return this.headers.filter(e=>!e.group_id&&-1===this.addedHeaders.indexOf(e.id)||this.deletedHeaders.indexOf(e.id)>-1).sort(g)}},methods:{addHeader(){const e=this.deletedHeaders.indexOf(this.modelAddHeader);e>-1?this.deletedHeaders.splice(e,1):-1===this.addedHeaders.indexOf(this.modelAddHeader)&&this.addedHeaders.push(this.modelAddHeader),this.modelAddHeader=""},deleteHeader(e){const t=this.addedHeaders.indexOf(e);t>-1?this.addedHeaders.splice(t,1):-1===this.deletedHeaders.indexOf(e)&&this.deletedHeaders.push(e)},async saveGroup(){const e=await async function(e,t,n,a){return e&&t?await _({method:"post",url:`${m}update-header-group`,data:{id:e,name:t,added:n,deleted:a}}):(console.error("updateHeaderGroup failed because not enough data was given!"),{error:"Es fehlen Daten, um die Änderungen zu speichern!"})}(this.id,this.modelName,this.addedHeaders,this.deletedHeaders);if(e&&e.success)return alert("Änderungen wurden gespeichert!"),void this.$emit("update-group");e&&e.error?alert(`Beim Speichern ist ein Fehler aufgetreten: ${e.error}`):alert("Beim Speichern ist ein unbekannter Fehler aufgetreten")},async deleteGroup(){if(window.confirm("Diese Tabellengruppe und alle Zuordnungen werden endgültig gelöscht. Dies kann nicht rueckgängig gemacht werden. Bist du sicher?")){const e=await async function(e){return e?await _({method:"delete",url:`${m}delete-header-group`,data:{id:e}}):(console.error("deleteHeaderGroup failed because no header group id was given!"),{error:"Es fehlen Daten, um die Tabellengruppe zu löschen!"})}(this.id);if(e&&e.success)return alert("Tabellengruppe und Zuordnungen wurden gelöscht!"),void this.$emit("delete-group");if(e&&e.error)return void alert(`Beim Löschen ist ein Fehler aufgetreten: ${e.error}`);alert("Beim Löschen ist ein unbekannter Fehler aufgetreten")}}}},y=(n(84),{name:"EditTableGroups",components:{TableGroupForm:Object(o.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"table-group-form"},[n("div",{staticClass:"table-group-form__field"},[n("label",{staticClass:"table-group-form__label",attrs:{for:"group_name_"+e.id}},[e._v("Name: ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelName,expression:"modelName"}],staticClass:"table-group-form__input",attrs:{id:"group_name_"+e.id,type:"text"},domProps:{value:e.modelName},on:{input:function(t){t.target.composing||(e.modelName=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"table-group-form__headers"},[n("div",{staticClass:"table-group-form__headers-title"},[e._v("\n            Zugeordnete Tabellenköpfe:\n        ")]),e._v(" "),n("ul",{staticClass:"table-group-form__headers-list"},e._l(e.groupHeaders,(function(t){return n("li",{key:"group_header_"+t.id},[e._v("\n                "+e._s(t.name)+" \n                "),n("DeleteButton",{staticClass:"table-group-form__button",nativeOn:{click:function(n){return e.deleteHeader(t.id)}}})],1)})),0)]),e._v(" "),n("div",{staticClass:"table-group-form__field"},[e._v("\n        Tabellenkopf hinzufügen:\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.modelAddHeader,expression:"modelAddHeader"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.modelAddHeader=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("\n                --Auswählen--\n            ")]),e._v(" "),e._l(e.nonGroupHeaders,(function(t){return n("option",{key:"non_group_header_"+t.id,domProps:{value:t.id}},[e._v("\n                "+e._s(t.name)+"\n            ")])}))],2),e._v(" "),n("AddButton",{staticClass:"table-group-form__button",nativeOn:{click:function(t){return e.addHeader(t)}}})],1),e._v(" "),n("div",{staticClass:"table-group-form__field"},[n("SaveButton",{staticClass:"table-group-form__button",nativeOn:{click:function(t){return e.saveGroup(t)}}}),e._v(" "),n("DeleteButton",{staticClass:"table-group-form__DeleteButton",nativeOn:{click:function(t){return e.deleteGroup(t)}}})],1)])}),[],!1,null,"69bb2e6e",null).exports},data:()=>({headers:[],headerGroups:[]}),async created(){await this.load()},methods:{async load(){await this.loadHeaders(),await this.loadHeaderGroups()},async loadHeaders(){this.headers=await f()},async loadHeaderGroups(){this.headerGroups=await async function(){return await _({method:"get",url:`${m}header-groups`})}()},async addNewGroup(){const e=prompt("Wie soll die neue Tabellengruppe heißen?");if(e){const t=await async function(e){return await _({method:"post",url:`${m}add-header-group`,data:{name:e}})}(e);if(t&&t.success)return alert("Tabellengruppe wurde angelegt!"),void await this.loadHeaderGroups();if(t&&t.error)return void alert(`Beim Anlegen ist ein Fehler aufgetreten: ${t.error}`);alert("Beim Anlegen ist ein unbekannter Fehler aufgetreten")}else null!==e&&alert("Bitte gib einen Namen an, wenn du eine Tabellengruppe hinzufügen willst!")}}}),k=(n(86),Object(o.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-table-groups"},[n("h2",[e._v("Tabellengruppen bearbeiten")]),e._v(" "),e._m(0),e._v(" "),e._l(e.headerGroups,(function(t){return n("TableGroupForm",e._b({key:"group_"+t.id,attrs:{headers:e.headers.filter((function(e){return"1"!==e.order_id}))},on:{"update-group":e.load,"delete-group":e.loadHeaderGroups}},"TableGroupForm",t,!1))})),e._v(" "),n("AddButton",{staticClass:"edit-table-groups__add",attrs:{text:"Tabellengruppe hinzufügen"},nativeOn:{click:function(t){return e.addNewGroup(t)}}})],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("strong",{staticClass:"edit-table-groups__hint"},[this._v("\n        Tabellenköpfe in einer Gruppe sollten möglichst in der Reihenfolge direkt nacheinander stehen\n        (das macht die Tabelle übersichtlicher)."),t("br"),this._v("\n        Jeder Tabellenkopf kann nur einer Gruppe zugeordnet werden."),t("br"),this._v("\n        Willst du also einen Tabellenkopf in eine andere Gruppe verschieben,\n        musst du ihn zuerst aus der alten Gruppe löschen, speichern\n        und dann in der neuen hinzufügen und wieder speichern.\n    ")])}],!1,null,"485eab0b",null).exports),C={name:"TeaserForm",data:()=>({config:[],headers:[],modelIconHeader:"",modelCancelIcon:"",modelShowIcons:!1,modelIconsHeadline:""}),computed:{mainText(){return this.getConfigValue("teaser_main_text")},cancelText(){return this.getConfigValue("teaser_cancel_text")},iconHeaders(){return this.headers.filter(e=>"icons"===e.type)}},async mounted(){this.config=await h(),this.modelIconHeader=this.getConfigValue("header_for_widget"),this.modelCancelIcon=this.getConfigValue("icon_for_cancel"),this.modelShowIcons="1"===this.getConfigValue("teaser_show_icons"),this.modelIconsHeadline=this.getConfigValue("teaser_icons_headline"),setTimeout(()=>{wp.editor.initialize("editor-main-text"),wp.editor.initialize("editor-cancel-text")},0),this.headers=await f()},methods:{async save(){const e=await p({teaser_main_text:wp.editor.getContent("editor-main-text"),teaser_cancel_text:wp.editor.getContent("editor-cancel-text"),header_for_widget:this.modelIconHeader,icon_for_cancel:this.modelCancelIcon,teaser_show_icons:this.modelShowIcons,teaser_icons_headline:this.modelIconsHeadline});e&&e.success?alert("Änderungen wurden gespeichert!"):e&&e.error?alert(`Beim Speichern ist ein Fehler aufgetreten: ${e.error}`):(console.error(e),alert("Beim Speichern ist ein unbekannter Fehler aufgetreten"))},getConfigValue(e){let t=this.config.filter(t=>t.name===e);return t.length?t[0].data:""}}},F=(n(88),{name:"EditTeaser",components:{TeaserForm:Object(o.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"teaser-form"},[n("div",{staticClass:"teaser-form__field"},[e._m(0),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.mainText,expression:"mainText"}],attrs:{id:"editor-main-text",name:"editor-main-text",cols:"30",rows:"10"},domProps:{value:e.mainText},on:{input:function(t){t.target.composing||(e.mainText=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"teaser-form__field"},[n("p",{staticClass:"teaser-form__text"},[e._v("\n            Hier kann ein anderer Text angegeben werden, der erscheinen soll, wenn die Veranstaltung ausfällt\n            (Verwende auch hier %date% an der Stelle, wo das Datum erscheinen soll):\n        ")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cancelText,expression:"cancelText"}],attrs:{id:"editor-cancel-text",name:"editor-cancel-text",cols:"30",rows:"10"},domProps:{value:e.cancelText},on:{input:function(t){t.target.composing||(e.cancelText=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"teaser-form__field"},[n("p",{staticClass:"teaser-form__text"},[e._v('\n            Damit du angeben kannst, dass eine Veranstaltung ausfällt,\n            musst du in der Tabelle einen Tabellenkopf vom Typ "Icons" anlegen und dort ein Icon hinzufügen,\n            welches ausgewählt werden muss, wenn eine Veranstaltung ausfällt.\n        ')]),e._v(" "),n("p",{staticClass:"teaser-form__text"},[n("label",{attrs:{for:"icon-header"}},[e._v("Wähle hier den entsprechenden Tabellenkopf aus:")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.modelIconHeader,expression:"modelIconHeader"}],attrs:{id:"icon-header"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.modelIconHeader=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("\n                    --Auswählen--\n                ")]),e._v(" "),e._l(e.iconHeaders,(function(t){return n("option",{key:"icon_header_"+t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.name)+"\n                ")])}))],2)]),e._v(" "),n("p",{staticClass:"teaser-form__text"},[n("label",{attrs:{for:"cancel-icon"}},[e._v("Gib hier den Namen des entsprechenden Icons an (Fontawesome Icon Name):")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelCancelIcon,expression:"modelCancelIcon"}],attrs:{id:"cancel-icon",type:"text"},domProps:{value:e.modelCancelIcon},on:{input:function(t){t.target.composing||(e.modelCancelIcon=t.target.value)}}})]),e._v(" "),n("p",{staticClass:"teaser-form__text"},[e._v("\n            Sollen die anderen Icons aus dem Tabellenkopf unter dem Teasertext angezeigt werden?\n            "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelShowIcons,expression:"modelShowIcons"}],attrs:{id:"show-icons",type:"checkbox",value:"true"},domProps:{checked:Array.isArray(e.modelShowIcons)?e._i(e.modelShowIcons,"true")>-1:e.modelShowIcons},on:{change:function(t){var n=e.modelShowIcons,a=t.target,r=!!a.checked;if(Array.isArray(n)){var o=e._i(n,"true");a.checked?o<0&&(e.modelShowIcons=n.concat(["true"])):o>-1&&(e.modelShowIcons=n.slice(0,o).concat(n.slice(o+1)))}else e.modelShowIcons=r}}}),n("label",{attrs:{for:"show-icons"}},[e._v("Ja")])]),e._v(" "),n("p",{staticClass:"teaser-form__text"},[n("label",{attrs:{for:"icons-headline"}},[e._v('\n                Wenn über den Icons noch eine Überschrift ("Besonderheiten" o.ä.) erscheinen soll,\n                dann gib diese hier an:\n            ')]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelIconsHeadline,expression:"modelIconsHeadline"}],attrs:{id:"icons-headline",type:"text"},domProps:{value:e.modelIconsHeadline},on:{input:function(t){t.target.composing||(e.modelIconsHeadline=t.target.value)}}})])]),e._v(" "),n("div",[n("SaveButton",{staticClass:"teaser-form__button",nativeOn:{click:function(t){return e.save(t)}}})],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"teaser-form__text"},[this._v("\n            Der Shortcode "),t("strong",[this._v("[eventplanner_current]")]),this._v(" ist dazu gedacht,\n            einen kurzen Text auszugeben, der den Besucher über die\n            nächste regelmäßig stattfindende Veranstaltung (z.B. den nächsten Gottesdienst) informiert\n            (z.B. zur Anzeige auf der Startseite).\n            Hier kann der Text dafür eingegeben werden\n            (Verwende %date% an der Stelle, wo das Datum erscheinen soll):\n        ")])}],!1,null,"0858f0a4",null).exports}}),H=Object(o.a)(F,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-settings"},[t("h2",[this._v("Teaser bearbeiten")]),this._v(" "),t("TeaserForm")],1)}),[],!1,null,"2a017ec8",null).exports,T={name:"FootnotesForm",props:{header:{type:Object,default:()=>{}},footnotes:{type:Array,default:()=>[]}},data(){return{modeledFootnotes:this.footnotes.map(e=>Object.assign({deleted:!1},e)),countNew:0,newPrefix:"NEW"}},computed:{modeledFootnotesFiltered(){return this.modeledFootnotes.filter(e=>!0!==e.deleted)}},methods:{deleteFootnote(e){if(window.confirm('Diese Fußnote wirklich loeschen? (Wird erst endgültig gespeichert, wenn du auf "Speichern" geklickt hast.)')){0===this.modeledFootnotes[e].id.indexOf(this.newPrefix)?this.modeledFootnotes.splice(e,1):this.modeledFootnotes[e].deleted=!0}},addFootnote(){const e=prompt("Gib den Text für die Fußnote an: ");e?(this.modeledFootnotes.push({text:e,header_id:this.header.id,id:`${this.newPrefix}_${this.countNew}`}),this.countNew++):null!==e&&alert("Du musst einen Text für die neue Fußnote angeben!")},async save(){let e=!1;await this.modeledFootnotes.forEach(async t=>{let n;if(n=t.deleted?await async function(e){return e?await _({method:"delete",url:`${m}delete-header-footnote`,data:{id:e}}):(console.error("deleteFootnote failed because no footnote id was given!"),{error:"Es fehlen Daten, um die Fußnote zu löschen!"})}(t.id):0===t.id.indexOf(this.newPrefix)?await async function(e){return await _({method:"post",url:`${m}add-header-footnote`,data:e})}(t):await async function(e){return e.id&&e.text&&e.header_id?await _({method:"post",url:`${m}update-header-footnote`,data:e}):(console.error("updateFootnote failed because not enough data was given!"),{error:"Es fehlen Daten, um die Änderungen zu speichern!"})}(t),n.error)return e=!0,void alert(n.error)}),e||(alert("Änderungen gespeichert!"),this.$emit("update"))}}},I=(n(90),{name:"EditFootnotes",components:{FootnotesForm:Object(o.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"footnotes-form"},[n("strong",[e._v(e._s(e.header.name))]),e._v(" "),e._l(e.modeledFootnotesFiltered,(function(t,a){return n("div",{key:"footnote_"+t.id,staticClass:"footnotes-form__field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"footnote.text"}],staticClass:"footnotes-form__input",attrs:{type:"text"},domProps:{value:t.text},on:{input:function(n){n.target.composing||e.$set(t,"text",n.target.value)}}}),e._v(" "),n("DeleteButton",{staticClass:"footnotes-form__button",nativeOn:{click:function(t){return e.deleteFootnote(a)}}})],1)})),e._v(" "),n("div",{staticClass:"footnotes-form__field"},[e.modeledFootnotes.length?n("SaveButton",{staticClass:"footnotes-form__button",nativeOn:{click:function(t){return e.save(t)}}}):e._e(),e._v(" "),n("AddButton",{staticClass:"footnotes-form__button",attrs:{text:"Fußnote hinzufügen"},nativeOn:{click:function(t){return e.addFootnote(t)}}})],1)],2)}),[],!1,null,"11fa8c52",null).exports},data:()=>({headers:[],footnotes:[]}),async created(){await this.load()},methods:{async load(){this.headers=[],this.footnotes=await async function(){return await _({method:"get",url:`${m}header-footnotes`})}(),this.headers=await f()},getFootnotesForHeader(e){return this.footnotes.filter(t=>t.header_id===e)}}}),A=Object(o.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-footnotes"},[n("h2",[e._v("Fußnoten bearbeiten")]),e._v(" "),e._l(e.headers,(function(t){return n("FootnotesForm",{key:"header_"+t.id,attrs:{header:t,footnotes:e.getFootnotesForHeader(t.id)},on:{update:e.load}})}))],2)}),[],!1,null,null,null).exports,S={name:"SettingsForm",data:()=>({modelWeekday:"sunday",modelHeaders:[],config:[],headers:[],modelAutofill:!1,modelFontawesome:!0}),async mounted(){this.config=await h(),this.headers=await f(),this.modelWeekday=this.getConfigValue("autofill_weekday"),this.modelAutofill="1"===this.getConfigValue("use_autofill"),this.modelFontawesome="1"===this.getConfigValue("use_fontawesome");const e=this.getConfigValue("static_fields");e&&(this.modelHeaders=JSON.parse(e))},methods:{async save(){const e=await p({autofill_weekday:this.modelWeekday,static_fields:JSON.stringify(this.modelHeaders),use_autofill:this.modelAutofill,use_fontawesome:this.modelFontawesome});e&&e.success?alert("Änderungen wurden gespeichert!"):e&&e.error?alert(`Beim Speichern ist ein Fehler aufgetreten: ${e.error}`):(console.error(e),alert("Beim Speichern ist ein unbekannter Fehler aufgetreten"))},getConfigValue(e){let t=this.config.filter(t=>t.name===e);return t.length?t[0].data:""}}},z=(n(92),{name:"EditSettings",components:{SettingsForm:Object(o.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"settings-form"},[n("div",{staticClass:"settings-form__field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelAutofill,expression:"modelAutofill"}],attrs:{id:"autofill",type:"checkbox"},domProps:{checked:Array.isArray(e.modelAutofill)?e._i(e.modelAutofill,null)>-1:e.modelAutofill},on:{change:function(t){var n=e.modelAutofill,a=t.target,r=!!a.checked;if(Array.isArray(n)){var o=e._i(n,null);a.checked?o<0&&(e.modelAutofill=n.concat([null])):o>-1&&(e.modelAutofill=n.slice(0,o).concat(n.slice(o+1)))}else e.modelAutofill=r}}}),e._v(" "),n("label",{attrs:{for:"autofill"}},[e._v("Tabelle automatisch befüllen")]),e._v(" "),n("br"),e._v(" "),n("small",[e._v("\n            Wenn du diese Option auswählst, werden immer automatisch Veranstaltungen für deinen gewählten Wochentag\n            (siehe unten) für das laufende und das kommende Jahr angelegt.\n            Du kannst diese dann trotzdem manuell löschen bzw. Veranstaltungen an anderen Wochentagen\n            manuell hinzufügen.\n        ")])]),e._v(" "),n("div",{staticClass:"settings-form__field"},[n("label",{attrs:{for:"weekday"}},[e._v("\n            Wähle hier aus, an welchem Wochentag deine regelmäßige Veranstaltung (z.B. Gottesdienst) stattfindet.\n        ")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.modelWeekday,expression:"modelWeekday"}],attrs:{id:"weekday"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.modelWeekday=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"sunday"}},[e._v("\n                Sonntag\n            ")]),e._v(" "),n("option",{attrs:{value:"monday"}},[e._v("\n                Montag\n            ")]),e._v(" "),n("option",{attrs:{value:"tuesday"}},[e._v("\n                Dienstag\n            ")]),e._v(" "),n("option",{attrs:{value:"wednesday"}},[e._v("\n                Mittwoch\n            ")]),e._v(" "),n("option",{attrs:{value:"thursday"}},[e._v("\n                Donnerstag\n            ")]),e._v(" "),n("option",{attrs:{value:"friday"}},[e._v("\n                Freitag\n            ")]),e._v(" "),n("option",{attrs:{value:"saturday"}},[e._v("\n                Samstag\n            ")])]),e._v(" "),n("br"),e._v(" "),n("small",[e._v("\n            Diese Einstellungen wird für das automatische Befüllen der Tabelle verwendet\n            und für die Anzeige des Teasers.\n        ")])]),e._v(" "),n("div",{staticClass:"settings-form__field"},[e._v('\n        Hier kannst du auswählen, welche Tabellenköpfe bei der Übersichtstabelle\n        (Shortcode: [eventplanner static="true"]) standardmäßig angezeigt werden sollen:'),n("br"),e._v("\n        (Die Nutzer können dann trotzdem über Filter alle Tabellenköpfe ein- und ausblenden)"),n("br"),e._v(" "),n("div",e._l(e.headers,(function(t){return n("div",{key:"header_"+t.id,staticClass:"settings-form__header"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.modelHeaders,expression:"modelHeaders",modifiers:{number:!0}}],attrs:{id:"header_"+t.id,type:"checkbox",disabled:"1"===t.order_id},domProps:{value:t.id,checked:Array.isArray(e.modelHeaders)?e._i(e.modelHeaders,t.id)>-1:e.modelHeaders},on:{change:function(n){var a=e.modelHeaders,r=n.target,o=!!r.checked;if(Array.isArray(a)){var i=e._n(t.id),s=e._i(a,i);r.checked?s<0&&(e.modelHeaders=a.concat([i])):s>-1&&(e.modelHeaders=a.slice(0,s).concat(a.slice(s+1)))}else e.modelHeaders=o}}}),e._v(" "),n("label",{attrs:{for:"header_"+t.id}},[e._v(e._s(t.name))])])})),0)]),e._v(" "),n("div",{staticClass:"settings-form__field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.modelFontawesome,expression:"modelFontawesome"}],attrs:{id:"fontawesome",type:"checkbox"},domProps:{checked:Array.isArray(e.modelFontawesome)?e._i(e.modelFontawesome,null)>-1:e.modelFontawesome},on:{change:function(t){var n=e.modelFontawesome,a=t.target,r=!!a.checked;if(Array.isArray(n)){var o=e._i(n,null);a.checked?o<0&&(e.modelFontawesome=n.concat([null])):o>-1&&(e.modelFontawesome=n.slice(0,o).concat(n.slice(o+1)))}else e.modelFontawesome=r}}}),e._v(" "),n("label",{attrs:{for:"fontawesome"}},[e._v("Fontawesome laden")]),e._v(" "),n("br"),e._v(" "),n("small",[e._v("\n            Wenn du diese Option auswählst, wird das CSS für die Icons von Fontawesome durch das Plugin geladen.\n            (Es kann sein, dass dein Theme oder ein anderes Plugin bereits Fontawesome Icons lädt und es deswegen\n            zu Konflikten kommt, bzw. unnötig zweimal die gleichen Icons geladen werden - im Zweifelsfall, einfach\n            mal ausprobieren, ob die Icons noch korrekt funktionieren, wenn du hier den Haken nicht setzt.)\n        ")])]),e._v(" "),n("SaveButton",{staticClass:"settings-form__button",nativeOn:{click:function(t){return e.save(t)}}})],1)}),[],!1,null,"490e3f17",null).exports}}),B=(n(94),Object(o.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-settings"},[n("h2",[e._v("Allgemeines")]),e._v(" "),n("p",[e._v("Der Event Planner funktioniert folgendermaßen:")]),e._v(" "),e._m(0),e._v(" "),n("h2",[e._v("Einstellungen")]),e._v(" "),n("p",[e._v("Hier kannst du noch einige allgemeine Einstellungen vornehmen.")]),e._v(" "),n("SettingsForm")],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"edit-settings__list"},[n("li",[e._v('\n            Lege hier in den Einstellungen unter "Tabellenköpfe" fest,\n            welche Daten in der Planungstabelle erfasst werden sollen (z.B. Ort der Veranstaltung, Prediger usw.).\n        ')]),e._v(" "),n("li",[e._v("\n            Außerdem kannst du Tabellenköpfe zu Gruppen zusammenfassen\n            (diese werden in der Tabelle entsprechend dargestellt und können ein- und ausgeklappt werden)\n            und Fußnoten mit Anmerkungen zu den Tabellenköpfen angeben.\n        ")]),e._v(" "),n("li",[e._v("\n            Füge auf der Seite, auf der die Planungstabelle angezeigt werden soll,\n            den Shortcode "),n("strong",[e._v("[eventplanner]")]),e._v(" ein.\n        ")]),e._v(" "),n("li",[e._v("\n            Die so erzeugte Tabelle kan von jedem Besucher der Seite\n            per Klick auf die Tabellenfelder bearbeitet werden\n            - sie sollte also nur den Leuten zugänglich gemacht werden, die dazu berechtigt sind.\n        ")]),e._v(" "),n("li",[e._v("\n            Zusätzlich gibt es den Shortcode "),n("strong",[e._v('[eventplanner static="true"]')]),e._v('\n            - dieser erzeugt eine andere Ansicht der Tabelle, die eher als statische Übersicht gedacht ist.\n            Hier können zusätzlich ein oder mehrere Jahre angegeben werden, für die Daten angezeigt werden sollen,\n            z.B. [eventplanner static="true" years="2020,2021"].\n        ')])])}],!1,null,"f48f19d2",null).exports);a.a.use(s.a);var O=new s.a({routes:[{path:"/",name:"EditSettings",component:B},{path:"/table-headers",name:"EditTableHeaders",component:w},{path:"/teaser",name:"EditTeaser",component:H},{path:"/table-groups",name:"EditTableGroups",component:k},{path:"/footnotes",name:"EditFootnotes",component:A}]});var N=function(e){let t=jQuery,n=t("#toplevel_page_"+e),a=window.location.href,r=a.substr(a.indexOf("admin.php"));n.on("click","a",(function(){let e=t(this);t("ul.wp-submenu li",n).removeClass("current"),e.hasClass("wp-has-submenu")?t("li.wp-first-item",n).addClass("current"):e.parents("li").addClass("current")})),t("ul.wp-submenu a",n).each((function(e,n){t(n).attr("href")!==r||t(n).parent().addClass("current")}))},D={name:"SaveButton",props:{text:{type:String,default:"Hinzufügen"}}},$=Object(o.a)(D,(function(){var e=this.$createElement,t=this._self._c||e;return t("button",{attrs:{type:"button"}},[t("i",{staticClass:"fa fa-fw fa-plus"}),this._v(" "+this._s(this.text)+"\n")])}),[],!1,null,null,null).exports,E={name:"DeleteButton",props:{text:{type:String,default:"Löschen"}}},G=Object(o.a)(E,(function(){var e=this.$createElement,t=this._self._c||e;return t("button",{attrs:{type:"button"}},[t("i",{staticClass:"fa fa-fw fa-trash"}),this._v(" "+this._s(this.text)+"\n")])}),[],!1,null,null,null).exports,P={name:"SaveButton",props:{text:{type:String,default:"Speichern"}}},V=Object(o.a)(P,(function(){var e=this.$createElement,t=this._self._c||e;return t("button",{attrs:{type:"button"}},[t("i",{staticClass:"fa fa-fw fa-save"}),this._v(" "+this._s(this.text)+"\n")])}),[],!1,null,null,null).exports;a.a.component("AddButton",$),a.a.component("DeleteButton",G),a.a.component("SaveButton",V),a.a.config.productionTip=!1,new a.a({el:"#vue-admin-app",router:O,render:e=>e(i)}),N("vue-app")}},[[99,0,1]]]);